<!DOCTYPE html>
<html>
<head prefix="og: http://ogp.me/ns#">
    <title>WebPad</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#333333" />
    <meta name="application-name" content="WebPad">
    <meta name="msapplication-TileColor" content="#333333">
    

    <meta name="description" content="Wiki, personal wiki.">
    <meta name="keywords" content="wiki, personal wiki, personal-wiki, note taking app, note-taking, link notes">
    <meta name="author" content="Kryvonos Oleksandr">

    <!-- Facebook's OpenGraph protocol meta start -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="WebPad" />
    
    <meta property="og:image" content="https://webpad.com.ua/WebPad_logo_500.png" />
    <meta property="og:image:secure_url" content="https://webpad.com.ua/WebPad_logo_500.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="500" />
    <meta property="og:image:alt" content="The WebPad logo that consists of 4 colored lightning symbol, that are: orange, purple, green and yellow." />

    <meta property="og:url" content="https://webpad.com.ua/" />
    <meta property="og:description" content="Wiki, personal wiki." />
    <meta property="og:determiner" content="the" />
    <meta property="og:site_name" content="WebPad" />
    <meta property="og:video" content="https://www.youtube.com/watch?v=SxVn7iSVn3A" />
    <!-- Facebook's OpenGraph protocol meta end -->
    
    <link rel="manifest" href="json/manifest.json" >
    <script src="lib/jquery/jquery.js"  lisperanto-skip-bundle="true"></script>
    
    <script src="lib/knockout/knockout-latest.debug.js"  lisperanto-skip-bundle="true"></script>
    <script src="lib/tiny-segmenter/tiny-segmenter-0.2.0.js"  lisperanto-skip-bundle="true"></script>




    <link rel="apple-touch-icon" sizes="32x32" href="/WebPad_logo_32.png">
    <link rel="apple-touch-icon" sizes="57x57" href="/WebPad_logo_57.png">
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/WebPad_logo_57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/WebPad_logo_60.png">
    <link rel="apple-touch-icon" sizes="64x64" href="/WebPad_logo_64.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/WebPad_logo_72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/WebPad_logo_76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/WebPad_logo_114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/WebPad_logo_120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/WebPad_logo_144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/WebPad_logo_152.png">
    <link rel="apple-touch-icon" sizes="250x250" href="/WebPad_logo_250.png">
    <link rel="apple-touch-icon" sizes="500x500" href="/WebPad_logo_500.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/WebPad_logo_512.png">

<style>
/* Begin of "css/w3-4.13.css" */
/* W3.CSS 4.13 June 2019 by Jan Egil and Borge Refsnes */
html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}
/* Extract from normalize.css by Nicolas Gallagher and Jonathan Neal git.io/normalize */
html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}
article,aside,details,figcaption,figure,footer,header,main,menu,nav,section{display:block}summary{display:list-item}
audio,canvas,progress,video{display:inline-block}progress{vertical-align:baseline}
audio:not([controls]){display:none;height:0}[hidden],template{display:none}
a{background-color:transparent}a:active,a:hover{outline-width:0}
abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}
b,strong{font-weight:bolder}dfn{font-style:italic}mark{background:#ff0;color:#000}
small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sub{bottom:-0.25em}sup{top:-0.5em}figure{margin:1em 40px}img{border-style:none}
code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}hr{box-sizing:content-box;height:0;overflow:visible}
button,input,select,textarea,optgroup{font:inherit;margin:0}optgroup{font-weight:bold}
button,input{overflow:visible}button,select{text-transform:none}
button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}
button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}
button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}
fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:.35em .625em .75em}
legend{color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}
[type=checkbox],[type=radio]{padding:0}
[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}
[type=search]{-webkit-appearance:textfield;outline-offset:-2px}
[type=search]::-webkit-search-decoration{-webkit-appearance:none}
::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}
/* End extract */
html,body{font-family:Verdana,sans-serif;font-size:15px;line-height:1.5}html{overflow-x:hidden}
h1{font-size:36px}h2{font-size:30px}h3{font-size:24px}h4{font-size:20px}h5{font-size:18px}h6{font-size:16px}.w3-serif{font-family:serif}
h1,h2,h3,h4,h5,h6{font-family:"Segoe UI",Arial,sans-serif;font-weight:400;margin:10px 0}.w3-wide{letter-spacing:4px}
hr{border:0;border-top:1px solid #eee;margin:20px 0}
.w3-image{max-width:100%;height:auto}img{vertical-align:middle}a{color:inherit}
.w3-table,.w3-table-all{border-collapse:collapse;border-spacing:0;width:100%;display:table}.w3-table-all{border:1px solid #ccc}
.w3-bordered tr,.w3-table-all tr{border-bottom:1px solid #ddd}.w3-striped tbody tr:nth-child(even){background-color:#f1f1f1}
.w3-table-all tr:nth-child(odd){background-color:#fff}.w3-table-all tr:nth-child(even){background-color:#f1f1f1}
.w3-hoverable tbody tr:hover,.w3-ul.w3-hoverable li:hover{background-color:#ccc}.w3-centered tr th,.w3-centered tr td{text-align:center}
.w3-table td,.w3-table th,.w3-table-all td,.w3-table-all th{padding:8px 8px;display:table-cell;text-align:left;vertical-align:top}
.w3-table th:first-child,.w3-table td:first-child,.w3-table-all th:first-child,.w3-table-all td:first-child{padding-left:16px}
.w3-btn,.w3-button{border:none;display:inline-block;padding:8px 16px;vertical-align:middle;overflow:hidden;text-decoration:none;color:inherit;background-color:inherit;text-align:center;cursor:pointer;white-space:nowrap}
.w3-btn:hover{box-shadow:0 8px 16px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}
.w3-btn,.w3-button{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}   
.w3-disabled,.w3-btn:disabled,.w3-button:disabled{cursor:not-allowed;opacity:0.3}.w3-disabled *,:disabled *{pointer-events:none}
.w3-btn.w3-disabled:hover,.w3-btn:disabled:hover{box-shadow:none}
.w3-badge,.w3-tag{background-color:#000;color:#fff;display:inline-block;padding-left:8px;padding-right:8px;text-align:center}.w3-badge{border-radius:50%}
.w3-ul{list-style-type:none;padding:0;margin:0}.w3-ul li{padding:8px 16px;border-bottom:1px solid #ddd}.w3-ul li:last-child{border-bottom:none}
.w3-tooltip,.w3-display-container{position:relative}.w3-tooltip .w3-text{display:none}.w3-tooltip:hover .w3-text{display:inline-block}
.w3-ripple:active{opacity:0.5}.w3-ripple{transition:opacity 0s}
.w3-input{padding:8px;display:block;border:none;border-bottom:1px solid #ccc;width:100%}
.w3-select{padding:9px 0;width:100%;border:none;border-bottom:1px solid #ccc}
.w3-dropdown-click,.w3-dropdown-hover{position:relative;display:inline-block;cursor:pointer}
.w3-dropdown-hover:hover .w3-dropdown-content{display:block}
.w3-dropdown-hover:first-child,.w3-dropdown-click:hover{background-color:#ccc;color:#000}
.w3-dropdown-hover:hover > .w3-button:first-child,.w3-dropdown-click:hover > .w3-button:first-child{background-color:#ccc;color:#000}
.w3-dropdown-content{cursor:auto;color:#000;background-color:#fff;display:none;position:absolute;min-width:160px;margin:0;padding:0;z-index:1}
.w3-check,.w3-radio{width:24px;height:24px;position:relative;top:6px}
.w3-sidebar{height:100%;width:200px;background-color:#fff;position:fixed!important;z-index:1;overflow:auto}
.w3-bar-block .w3-dropdown-hover,.w3-bar-block .w3-dropdown-click{width:100%}
.w3-bar-block .w3-dropdown-hover .w3-dropdown-content,.w3-bar-block .w3-dropdown-click .w3-dropdown-content{min-width:100%}
.w3-bar-block .w3-dropdown-hover .w3-button,.w3-bar-block .w3-dropdown-click .w3-button{width:100%;text-align:left;padding:8px 16px}
.w3-main,#main{transition:margin-left .4s}
.w3-modal{z-index:3;display:none;padding-top:100px;position:fixed;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgb(0,0,0);background-color:rgba(0,0,0,0.4)}
.w3-modal-content{margin:auto;background-color:#fff;position:relative;padding:0;outline:0;width:600px}
.w3-bar{width:100%;overflow:hidden}.w3-center .w3-bar{display:inline-block;width:auto}
.w3-bar .w3-bar-item{padding:8px 16px;float:left;width:auto;border:none;display:block;outline:0}
.w3-bar .w3-dropdown-hover,.w3-bar .w3-dropdown-click{position:static;float:left}
.w3-bar .w3-button{white-space:normal}
.w3-bar-block .w3-bar-item{width:100%;display:block;padding:8px 16px;text-align:left;border:none;white-space:normal;float:none;outline:0}
.w3-bar-block.w3-center .w3-bar-item{text-align:center}.w3-block{display:block;width:100%}
.w3-responsive{display:block;overflow-x:auto}
.w3-container:after,.w3-container:before,.w3-panel:after,.w3-panel:before,.w3-row:after,.w3-row:before,.w3-row-padding:after,.w3-row-padding:before,
.w3-cell-row:before,.w3-cell-row:after,.w3-clear:after,.w3-clear:before,.w3-bar:before,.w3-bar:after{content:"";display:table;clear:both}
.w3-col,.w3-half,.w3-third,.w3-twothird,.w3-threequarter,.w3-quarter{float:left;width:100%}
.w3-col.s1{width:8.33333%}.w3-col.s2{width:16.66666%}.w3-col.s3{width:24.99999%}.w3-col.s4{width:33.33333%}
.w3-col.s5{width:41.66666%}.w3-col.s6{width:49.99999%}.w3-col.s7{width:58.33333%}.w3-col.s8{width:66.66666%}
.w3-col.s9{width:74.99999%}.w3-col.s10{width:83.33333%}.w3-col.s11{width:91.66666%}.w3-col.s12{width:99.99999%}
@media (min-width:60rem){.w3-col.m1{width:8.33333%}.w3-col.m2{width:16.66666%}.w3-col.m3,.w3-quarter{width:24.99999%}.w3-col.m4,.w3-third{width:33.33333%}
.w3-col.m5{width:41.66666%}.w3-col.m6,.w3-half{width:49.99999%}.w3-col.m7{width:58.33333%}.w3-col.m8,.w3-twothird{width:66.66666%}
.w3-col.m9,.w3-threequarter{width:74.99999%}.w3-col.m10{width:83.33333%}.w3-col.m11{width:91.66666%}.w3-col.m12{width:99.99999%}}
@media (min-width:90rem){.w3-col.l1{width:8.33333%}.w3-col.l2{width:16.66666%}.w3-col.l3{width:24.99999%}.w3-col.l4{width:33.33333%}
.w3-col.l5{width:41.66666%}.w3-col.l6{width:49.99999%}.w3-col.l7{width:58.33333%}.w3-col.l8{width:66.66666%}
.w3-col.l9{width:74.99999%}.w3-col.l10{width:83.33333%}.w3-col.l11{width:91.66666%}.w3-col.l12{width:99.99999%}}
.w3-rest{overflow:hidden}.w3-stretch{margin-left:-16px;margin-right:-16px}
.w3-content,.w3-auto{margin-left:auto;margin-right:auto}.w3-content{max-width:980px}.w3-auto{max-width:1140px}
.w3-cell-row{display:table;width:100%}.w3-cell{display:table-cell}
.w3-cell-top{vertical-align:top}.w3-cell-middle{vertical-align:middle}.w3-cell-bottom{vertical-align:bottom}
.w3-hide{display:none!important}.w3-show-block,.w3-show{display:block!important}.w3-show-inline-block{display:inline-block!important}
@media (max-width:1205px){.w3-auto{max-width:95%}}
@media (max-width:600px){.w3-modal-content{margin:0 10px;width:auto!important}.w3-modal{padding-top:30px}
.w3-dropdown-hover.w3-mobile .w3-dropdown-content,.w3-dropdown-click.w3-mobile .w3-dropdown-content{position:relative}	
.w3-hide-small{display:none!important}.w3-mobile{display:block;width:100%!important}.w3-bar-item.w3-mobile,.w3-dropdown-hover.w3-mobile,.w3-dropdown-click.w3-mobile{text-align:center}
.w3-dropdown-hover.w3-mobile,.w3-dropdown-hover.w3-mobile .w3-btn,.w3-dropdown-hover.w3-mobile .w3-button,.w3-dropdown-click.w3-mobile,.w3-dropdown-click.w3-mobile .w3-btn,.w3-dropdown-click.w3-mobile .w3-button{width:100%}}
@media (max-width:768px){.w3-modal-content{width:500px}.w3-modal{padding-top:50px}}
@media (min-width:90rem){.w3-modal-content{width:900px}.w3-hide-large{display:none!important}.w3-sidebar.w3-collapse{display:block!important}}
@media (max-width:992px) and (min-width:60rem){.w3-hide-medium{display:none!important}}
@media (max-width:992px){.w3-sidebar.w3-collapse{display:none}.w3-main{margin-left:0!important;margin-right:0!important}.w3-auto{max-width:100%}}
.w3-top,.w3-bottom{position:fixed;width:100%;z-index:1}.w3-top{top:0}.w3-bottom{bottom:0}
.w3-overlay{position:fixed;display:none;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.5);z-index:2}
.w3-display-topleft{position:absolute;left:0;top:0}.w3-display-topright{position:absolute;right:0;top:0}
.w3-display-bottomleft{position:absolute;left:0;bottom:0}.w3-display-bottomright{position:absolute;right:0;bottom:0}
.w3-display-middle{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%)}
.w3-display-left{position:absolute;top:50%;left:0%;transform:translate(0%,-50%);-ms-transform:translate(-0%,-50%)}
.w3-display-right{position:absolute;top:50%;right:0%;transform:translate(0%,-50%);-ms-transform:translate(0%,-50%)}
.w3-display-topmiddle{position:absolute;left:50%;top:0;transform:translate(-50%,0%);-ms-transform:translate(-50%,0%)}
.w3-display-bottommiddle{position:absolute;left:50%;bottom:0;transform:translate(-50%,0%);-ms-transform:translate(-50%,0%)}
.w3-display-container:hover .w3-display-hover{display:block}.w3-display-container:hover span.w3-display-hover{display:inline-block}.w3-display-hover{display:none}
.w3-display-position{position:absolute}
.w3-circle{border-radius:50%}
.w3-round-small{border-radius:2px}.w3-round,.w3-round-medium{border-radius:4px}.w3-round-large{border-radius:8px}.w3-round-xlarge{border-radius:16px}.w3-round-xxlarge{border-radius:32px}
.w3-row-padding,.w3-row-padding>.w3-half,.w3-row-padding>.w3-third,.w3-row-padding>.w3-twothird,.w3-row-padding>.w3-threequarter,.w3-row-padding>.w3-quarter,.w3-row-padding>.w3-col{padding:0 8px}
.w3-container,.w3-panel{padding:0.01em 16px}.w3-panel{margin-top:16px;margin-bottom:16px}
.w3-code,.w3-codespan{font-family:Consolas,"courier new";font-size:16px}
.w3-code{width:auto;background-color:#fff;padding:8px 12px;border-left:4px solid #4CAF50;word-wrap:break-word}
.w3-codespan{color:crimson;background-color:#f1f1f1;padding-left:4px;padding-right:4px;font-size:110%}
.w3-card,.w3-card-2{box-shadow:0 2px 5px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)}
.w3-card-4,.w3-hover-shadow:hover{box-shadow:0 4px 10px 0 rgba(0,0,0,0.2),0 4px 20px 0 rgba(0,0,0,0.19)}
.w3-spin{animation:w3-spin 2s infinite linear}@keyframes w3-spin{0%{transform:rotate(0deg)}100%{transform:rotate(359deg)}}
.w3-animate-fading{animation:fading 10s infinite}@keyframes fading{0%{opacity:0}50%{opacity:1}100%{opacity:0}}
.w3-animate-opacity{animation:opac 0.8s}@keyframes opac{from{opacity:0} to{opacity:1}}
.w3-animate-top{position:relative;animation:animatetop 0.4s}@keyframes animatetop{from{top:-300px;opacity:0} to{top:0;opacity:1}}
.w3-animate-left{position:relative;animation:animateleft 0.4s}@keyframes animateleft{from{left:-300px;opacity:0} to{left:0;opacity:1}}
.w3-animate-right{position:relative;animation:animateright 0.4s}@keyframes animateright{from{right:-300px;opacity:0} to{right:0;opacity:1}}
.w3-animate-bottom{position:relative;animation:animatebottom 0.4s}@keyframes animatebottom{from{bottom:-300px;opacity:0} to{bottom:0;opacity:1}}
.w3-animate-zoom {animation:animatezoom 0.6s}@keyframes animatezoom{from{transform:scale(0)} to{transform:scale(1)}}
.w3-animate-input{transition:width 0.4s ease-in-out}.w3-animate-input:focus{width:100%!important}
.w3-opacity,.w3-hover-opacity:hover{opacity:0.60}.w3-opacity-off,.w3-hover-opacity-off:hover{opacity:1}
.w3-opacity-max{opacity:0.25}.w3-opacity-min{opacity:0.75}
.w3-greyscale-max,.w3-grayscale-max,.w3-hover-greyscale:hover,.w3-hover-grayscale:hover{filter:grayscale(100%)}
.w3-greyscale,.w3-grayscale{filter:grayscale(75%)}.w3-greyscale-min,.w3-grayscale-min{filter:grayscale(50%)}
.w3-sepia{filter:sepia(75%)}.w3-sepia-max,.w3-hover-sepia:hover{filter:sepia(100%)}.w3-sepia-min{filter:sepia(50%)}
.w3-tiny{font-size:10px!important}.w3-small{font-size:12px!important}.w3-medium{font-size:15px!important}.w3-large{font-size:18px!important}
.w3-xlarge{font-size:24px!important}.w3-xxlarge{font-size:36px!important}.w3-xxxlarge{font-size:48px!important}.w3-jumbo{font-size:64px!important}
.w3-left-align{text-align:left!important}.w3-right-align{text-align:right!important}.w3-justify{text-align:justify!important}.w3-center{text-align:center!important}
.w3-border-0{border:0!important}.w3-border{border:1px solid #ccc!important}
.w3-border-top{border-top:1px solid #ccc!important}.w3-border-bottom{border-bottom:1px solid #ccc!important}
.w3-border-left{border-left:1px solid #ccc!important}.w3-border-right{border-right:1px solid #ccc!important}
.w3-topbar{border-top:6px solid #ccc!important}.w3-bottombar{border-bottom:6px solid #ccc!important}
.w3-leftbar{border-left:6px solid #ccc!important}.w3-rightbar{border-right:6px solid #ccc!important}
.w3-section,.w3-code{margin-top:16px!important;margin-bottom:16px!important}
.w3-margin{margin:16px!important}.w3-margin-top{margin-top:16px!important}.w3-margin-bottom{margin-bottom:16px!important}
.w3-margin-left{margin-left:16px!important}.w3-margin-right{margin-right:16px!important}
.w3-padding-small{padding:4px 8px!important}.w3-padding{padding:8px 16px!important}.w3-padding-large{padding:12px 24px!important}
.w3-padding-16{padding-top:16px!important;padding-bottom:16px!important}.w3-padding-24{padding-top:24px!important;padding-bottom:24px!important}
.w3-padding-32{padding-top:32px!important;padding-bottom:32px!important}.w3-padding-48{padding-top:48px!important;padding-bottom:48px!important}
.w3-padding-64{padding-top:64px!important;padding-bottom:64px!important}
.w3-left{float:left!important}.w3-right{float:right!important}
.w3-button:hover{color:#000!important;background-color:#ccc!important}
.w3-transparent,.w3-hover-none:hover{background-color:transparent!important}
.w3-hover-none:hover{box-shadow:none!important}
/* Colors */
.w3-amber,.w3-hover-amber:hover{color:#000!important;background-color:#ffc107!important}
.w3-aqua,.w3-hover-aqua:hover{color:#000!important;background-color:#00ffff!important}
.w3-blue,.w3-hover-blue:hover{color:#fff!important;background-color:#2196F3!important}
.w3-light-blue,.w3-hover-light-blue:hover{color:#000!important;background-color:#87CEEB!important}
.w3-brown,.w3-hover-brown:hover{color:#fff!important;background-color:#795548!important}
.w3-cyan,.w3-hover-cyan:hover{color:#000!important;background-color:#00bcd4!important}
.w3-blue-grey,.w3-hover-blue-grey:hover,.w3-blue-gray,.w3-hover-blue-gray:hover{color:#fff!important;background-color:#607d8b!important}
.w3-green,.w3-hover-green:hover{color:#fff!important;background-color:#4CAF50!important}
.w3-light-green,.w3-hover-light-green:hover{color:#000!important;background-color:#8bc34a!important}
.w3-indigo,.w3-hover-indigo:hover{color:#fff!important;background-color:#3f51b5!important}
.w3-khaki,.w3-hover-khaki:hover{color:#000!important;background-color:#f0e68c!important}
.w3-lime,.w3-hover-lime:hover{color:#000!important;background-color:#cddc39!important}
.w3-orange,.w3-hover-orange:hover{color:#000!important;background-color:#ff9800!important}
.w3-deep-orange,.w3-hover-deep-orange:hover{color:#fff!important;background-color:#ff5722!important}
.w3-pink,.w3-hover-pink:hover{color:#fff!important;background-color:#e91e63!important}
.w3-purple,.w3-hover-purple:hover{color:#fff!important;background-color:#9c27b0!important}
.w3-deep-purple,.w3-hover-deep-purple:hover{color:#fff!important;background-color:#673ab7!important}
.w3-red,.w3-hover-red:hover{color:#fff!important;background-color:#f44336!important}
.w3-sand,.w3-hover-sand:hover{color:#000!important;background-color:#fdf5e6!important}
.w3-teal,.w3-hover-teal:hover{color:#fff!important;background-color:#009688!important}
.w3-yellow,.w3-hover-yellow:hover{color:#000!important;background-color:#ffeb3b!important}
.w3-white,.w3-hover-white:hover{color:#000!important;background-color:#fff!important}
.w3-black,.w3-hover-black:hover{color:#fff!important;background-color:#000!important}
.w3-grey,.w3-hover-grey:hover,.w3-gray,.w3-hover-gray:hover{color:#000!important;background-color:#9e9e9e!important}
.w3-light-grey,.w3-hover-light-grey:hover,.w3-light-gray,.w3-hover-light-gray:hover{color:#000!important;background-color:#f1f1f1!important}
.w3-dark-grey,.w3-hover-dark-grey:hover,.w3-dark-gray,.w3-hover-dark-gray:hover{color:#fff!important;background-color:#616161!important}
.w3-pale-red,.w3-hover-pale-red:hover{color:#000!important;background-color:#ffdddd!important}
.w3-pale-green,.w3-hover-pale-green:hover{color:#000!important;background-color:#ddffdd!important}
.w3-pale-yellow,.w3-hover-pale-yellow:hover{color:#000!important;background-color:#ffffcc!important}
.w3-pale-blue,.w3-hover-pale-blue:hover{color:#000!important;background-color:#ddffff!important}
.w3-text-amber,.w3-hover-text-amber:hover{color:#ffc107!important}
.w3-text-aqua,.w3-hover-text-aqua:hover{color:#00ffff!important}
.w3-text-blue,.w3-hover-text-blue:hover{color:#2196F3!important}
.w3-text-light-blue,.w3-hover-text-light-blue:hover{color:#87CEEB!important}
.w3-text-brown,.w3-hover-text-brown:hover{color:#795548!important}
.w3-text-cyan,.w3-hover-text-cyan:hover{color:#00bcd4!important}
.w3-text-blue-grey,.w3-hover-text-blue-grey:hover,.w3-text-blue-gray,.w3-hover-text-blue-gray:hover{color:#607d8b!important}
.w3-text-green,.w3-hover-text-green:hover{color:#4CAF50!important}
.w3-text-light-green,.w3-hover-text-light-green:hover{color:#8bc34a!important}
.w3-text-indigo,.w3-hover-text-indigo:hover{color:#3f51b5!important}
.w3-text-khaki,.w3-hover-text-khaki:hover{color:#b4aa50!important}
.w3-text-lime,.w3-hover-text-lime:hover{color:#cddc39!important}
.w3-text-orange,.w3-hover-text-orange:hover{color:#ff9800!important}
.w3-text-deep-orange,.w3-hover-text-deep-orange:hover{color:#ff5722!important}
.w3-text-pink,.w3-hover-text-pink:hover{color:#e91e63!important}
.w3-text-purple,.w3-hover-text-purple:hover{color:#9c27b0!important}
.w3-text-deep-purple,.w3-hover-text-deep-purple:hover{color:#673ab7!important}
.w3-text-red,.w3-hover-text-red:hover{color:#f44336!important}
.w3-text-sand,.w3-hover-text-sand:hover{color:#fdf5e6!important}
.w3-text-teal,.w3-hover-text-teal:hover{color:#009688!important}
.w3-text-yellow,.w3-hover-text-yellow:hover{color:#d2be0e!important}
.w3-text-white,.w3-hover-text-white:hover{color:#fff!important}
.w3-text-black,.w3-hover-text-black:hover{color:#000!important}
.w3-text-grey,.w3-hover-text-grey:hover,.w3-text-gray,.w3-hover-text-gray:hover{color:#757575!important}
.w3-text-light-grey,.w3-hover-text-light-grey:hover,.w3-text-light-gray,.w3-hover-text-light-gray:hover{color:#f1f1f1!important}
.w3-text-dark-grey,.w3-hover-text-dark-grey:hover,.w3-text-dark-gray,.w3-hover-text-dark-gray:hover{color:#3a3a3a!important}
.w3-border-amber,.w3-hover-border-amber:hover{border-color:#ffc107!important}
.w3-border-aqua,.w3-hover-border-aqua:hover{border-color:#00ffff!important}
.w3-border-blue,.w3-hover-border-blue:hover{border-color:#2196F3!important}
.w3-border-light-blue,.w3-hover-border-light-blue:hover{border-color:#87CEEB!important}
.w3-border-brown,.w3-hover-border-brown:hover{border-color:#795548!important}
.w3-border-cyan,.w3-hover-border-cyan:hover{border-color:#00bcd4!important}
.w3-border-blue-grey,.w3-hover-border-blue-grey:hover,.w3-border-blue-gray,.w3-hover-border-blue-gray:hover{border-color:#607d8b!important}
.w3-border-green,.w3-hover-border-green:hover{border-color:#4CAF50!important}
.w3-border-light-green,.w3-hover-border-light-green:hover{border-color:#8bc34a!important}
.w3-border-indigo,.w3-hover-border-indigo:hover{border-color:#3f51b5!important}
.w3-border-khaki,.w3-hover-border-khaki:hover{border-color:#f0e68c!important}
.w3-border-lime,.w3-hover-border-lime:hover{border-color:#cddc39!important}
.w3-border-orange,.w3-hover-border-orange:hover{border-color:#ff9800!important}
.w3-border-deep-orange,.w3-hover-border-deep-orange:hover{border-color:#ff5722!important}
.w3-border-pink,.w3-hover-border-pink:hover{border-color:#e91e63!important}
.w3-border-purple,.w3-hover-border-purple:hover{border-color:#9c27b0!important}
.w3-border-deep-purple,.w3-hover-border-deep-purple:hover{border-color:#673ab7!important}
.w3-border-red,.w3-hover-border-red:hover{border-color:#f44336!important}
.w3-border-sand,.w3-hover-border-sand:hover{border-color:#fdf5e6!important}
.w3-border-teal,.w3-hover-border-teal:hover{border-color:#009688!important}
.w3-border-yellow,.w3-hover-border-yellow:hover{border-color:#ffeb3b!important}
.w3-border-white,.w3-hover-border-white:hover{border-color:#fff!important}
.w3-border-black,.w3-hover-border-black:hover{border-color:#000!important}
.w3-border-grey,.w3-hover-border-grey:hover,.w3-border-gray,.w3-hover-border-gray:hover{border-color:#9e9e9e!important}
.w3-border-light-grey,.w3-hover-border-light-grey:hover,.w3-border-light-gray,.w3-hover-border-light-gray:hover{border-color:#f1f1f1!important}
.w3-border-dark-grey,.w3-hover-border-dark-grey:hover,.w3-border-dark-gray,.w3-hover-border-dark-gray:hover{border-color:#616161!important}
.w3-border-pale-red,.w3-hover-border-pale-red:hover{border-color:#ffe7e7!important}.w3-border-pale-green,.w3-hover-border-pale-green:hover{border-color:#e7ffe7!important}
.w3-border-pale-yellow,.w3-hover-border-pale-yellow:hover{border-color:#ffffcc!important}.w3-border-pale-blue,.w3-hover-border-pale-blue:hover{border-color:#e7ffff!important}
/* End of "css/w3-4.13.css" */
</style>
        
<style>
/* Begin of "css/site.css" */


.night {
    margin: 0px;
    background-color:#000000;
    min-height: 100vh;
}

div {
   border-color: inherit; 
}

span {
    border-color: inherit; 
 }

.webpad-orange
{ 
    background: #ff5e00;
    color: #000000;
}

.webpad-blue-print
{ 
    background: #1a65b7;
    color: #ffffff;
}

.webpad-purple
{ 
    background: #6a1b9a;
    color: #ffffff;
}

.webpad-green
{ 
    background: #19bd11;
    color: #000000;
}

.webpad-yellow
{ 
    background: #f8df00;
    color: #000000;
}

.webpad-node 
{
    border-radius: .3em;
    padding: .1em;
    box-sizing: border-box;
    display: inline-block;
    font-size: .7em;
    word-break: break-word;
}

.webpad-break-words-node
{
    font-size: 1em;
    word-break: break-word;
}

.webpad-border-bottom-dotted{
    border-bottom-width: 0.2em;
    border-bottom-style: dotted;
}

.webpad-card
{
    border-color: inherit;
    border-width: 2mm;
    border-style: none;
    padding-bottom: 1em;
    margin-bottom: 0em;
    transition: left 0.3s, top 0.3s;
}

.webpad-inline
{
    display: inline;
}

.webpad-inline-flex
{
    display: inline-flex;
}

button
{
    background: inherit;
    color: inherit;
}
input
{
    background:inherit;
    color: inherit;
}


a 
{
    color: inherit;
    background: inherit;
    text-decoration: underline;
}
.disable-selection {
    -moz-user-select: none; /* Firefox */
    -ms-user-select: none; /* Internet Explorer */
    -khtml-user-select: none; /* KHTML browsers (e.g. Konqueror) */
    -webkit-user-select: none; /* Chrome, Safari, and Opera */
    -webkit-touch-callout: none; /* Disable Android and iOS callouts*/
}
.webpad-left
{
    margin-left: 7mm;
}
.webpad-left-2x
{
    margin-left: 14mm;
}

.webpad-right
{
    margin-right: 7mm;
}
.webpad-right-2x
{
    margin-right: 14mm;
}

.webpad-working-area
{
    border-color: #1a65b7;
    /* overflow-y: scroll; */
    /* height: 90vh; */
}

.webpad-search-result-area
{
    border-color: aliceblue;
    /* overflow-y: scroll; */
    /* height: 90vh; */
}

.webpad-edit-pencil
{
    width: 1em;
    height: 1em;
    /* margin-left: 0.2em; */
    /* margin-right: 0.2em; */
    pointer-events: none;
}

.webpad-svg-element
{
    height: 0.8em;
    /* margin-left: 0.2em; */
    /* margin-right: 0.2em; */
    pointer-events: none;
}

.webpad-button-no-border
{
    /* border-style: none; */
    display: inline-block;
}

.webpad-button-paddings
{
    padding-left: 1rem;
    padding-right: 1rem;
}

.webpad-options-background
{
    background: repeating-linear-gradient(
        45deg,
        #3d4574,
        #3d4574 2rem,
        #283058 2rem,
        #283058 4rem
        );
}

.webpad-search-bar-adjusted
{
    width: 100%;
}

.webpad-search-bar-full-width
{
    width: 100%;
}

.webpad-search-bar
{
    
    min-width: 150px;
    color: #64e05e;
    border-radius: .3em;
    border-style: solid;
    border-color: aliceblue;
    padding-left: .3em;
    padding-right: .3em;
    padding-bottom: .3em;
    padding-top: .3em;
}
.webpad-search-bar::placeholder
{
    color: inherit;
    filter: brightness(70%);
}

.webpad-extra-information
{
    border-radius: .3em;
    box-sizing : border-box;
    border-color: aliceblue;
    border-style: solid;
    width: calc(100% - 2em);
    padding-left: .3em;
    padding-right: .3em;
    padding-bottom: .3em;
    padding-top: .3em;
}

.webpad-extra-information-container
{
    width: calc();

}

.webpad-extra-information-plus-icon
{
   vertical-align: middle;
}

.webpad-extra-information::placeholder
{
    color: inherit;
    filter: brightness(70%);
}

.webpad-main-information
{
    border-radius: .3em;
    box-sizing : border-box;
    border-color: aliceblue;
    border-style: none;
    min-width: 4em;
    width: 100%;
}
.webpad-main-information::placeholder
{
    color: inherit;
    filter: brightness(70%);
}

.webpad-inner-information
{
    border-radius: .3em;
    box-sizing : border-box;
    border-color: aliceblue;
    border-style: solid;
    width: 100%;
}

.webpad-border-in-stack
{
    border-radius: .3em;
    border-width: .5em;
    box-sizing : border-box;
    border-color: aliceblue;
    border-style: dashed;
    width: 100%;
}

.webpad-top-of-stack
{
    border-radius: .3em;
    border-width: .5em;
    box-sizing : border-box;
    border-color: yellow;
    border-style: dashed;
    width: 100%;
}

.webpad-inner-information::placeholder
{
    color: inherit;
    filter: brightness(70%);
}

.webpad-brightness-dimmed
{
    filter: brightness(70%);
}

.webpad-brightness-dimmed-2x
{
    filter: brightness(49%);
}

.webpad-brightness-dimmed-3x
{
    filter: brightness(34%);
}

.webpad-quote-edit
{
    border-left-color: #f8e755;
    border-left-style: dotted;
    border-left-width: .4em;
    font-style: italic;
    padding-left: .5em;
}

.webpad-quote
{
    border-left-color: #84bfff;
    border-left-style: solid;
    border-left-width: .2em;
    font-style: italic;
    padding-left: .5em;
}



.webpad-contenteditable
{
    min-width: 4em;
}

.webpad-contenteditable[placeholder]:empty:before {
    content: attr(placeholder);
    color: inherit;
    filter: brightness(70%);
}

.webpad-contenteditable[placeholder]:empty:focus:before {
    content: "";
}

.webpad-search-absolute-position
{
    width: 100%;
    position: fixed;
    bottom: 0px;
    background:inherit;
}

.webpad-header-absolute-position
{
    width: 100%;
    position: fixed;
    top: 0px;
    background:inherit;
    z-index: 10;
}

.webpad-menu-absolute-position
{
    width: 40rem;
    max-width: calc(100% - 4rem);
    height: auto;
    max-height: 100vh;
    position: fixed;
    top: 0px;
    left: 0px;
    background: #333333;
    z-index: 2100;
    overflow-y: auto;
}


.webpad-menu-animate-show-from-left
{
    animation:animateshowfromleft 0.4s forwards;
    
}
@keyframes animateshowfromleft
{
    from{left:-40rem;opacity:0} to{left:0;opacity:1}
}


.webpad-menu-animate-fade-back
{
    animation:animatefadeback 0.4s forwards;
}
@keyframes animatefadeback
{
    from{left: 0;opacity:1} to{left: -40rem;opacity:0}
}
.webpad-menu-logo {
    width: 5rem;
    height: 5rem;
    background: url("../WebPad_logo_512.png");
    background-size: contain;
    background-repeat: no-repeat;
    text-align: center;
  }

.webpad-color-orange{ 
    color: #ffa26b;
}

.webpad-color-blue{ 
    color: #84bfff;
}

.weboad-color-pink{ 
    color: #ff94eb;
}

.webpad-color-green{ 
    color: #64e05e;
}

.webpad-color-yellow{ 
    color: #f8e755;
}

.webpad-color-light-pink{ 
    color: #ffbbdc;
}

.webpad-color-purple{ 
    color: #d190ff;
}

.webpad-color-coral{ 
    color: #ff8f95;
}
.webpad-hide-on-small-screen
{
    display: initial;
}
div.webpad-hide-on-small-screen
{
    display: block;
}
.webpad-hide-on-large-screen
{
    display: none;
}
div.webpad-hide-on-large-screen
{
    display: none;
}
@media (max-width:60rem)
{
    .webpad-hide-on-small-screen
    {
        display: none;
    }
    div.webpad-hide-on-small-screen
    {
        display: none;
    }
    .webpad-hide-on-large-screen
    {
        display: initial;
    }
    div.webpad-hide-on-large-screen
    {
        display: block;
    }
}

.webpad-glass-button
{
    border-left-style: solid;
    border-right-style: solid;
    border-top-style: none;
    border-bottom-style: none;
    border-width: 0.2rem;
    border-color: aliceblue;
    border-radius: 0.7rem;
}

@keyframes strike {
    from { text-decoration-color: transparent; }
    to { text-decoration-color: auto; }
  }
  .strike {  
    text-decoration: line-through;
    animation: strike 0.2s linear;
  }

  .webpad-golden-frame
  {
    border-style: solid; 
    border-width: 0.2rem;
    border-color: #f8e755;
    border-radius: 0.7rem;
  }

  .webpad-green-frame
  {
    border-style: solid; 
    border-width: 0.2rem;
    border-color: rgb(101, 215, 86);
    border-radius: 0.7rem;
  }

  .webpad-orange-frame
  {
    border-style: solid; 
    border-width: 0.2rem;
    border-color: rgb(208, 155, 80);
    border-radius: 0.7rem;
  }

  .webpad-sky-frame
  {
    border-style: solid; 
    border-width: 0.2rem;
    border-color: #84bfff;
    border-radius: 0.7rem;
  }


  .lisperanto-patreon{
    background:rgb(255, 66, 77);
    color:#fff;
    border-radius: 3rem;
    padding: 0.5rem;
    border: 0.2rem solid rgb(255, 66, 77);
    display: inline-block;
  }

.prevent-select {
    -webkit-user-select: none; /* Safari */
    -ms-user-select: none; /* IE 10 and IE 11 */
    user-select: none; /* Standard syntax */
}

.cursor-pointer {
    cursor: pointer;
}

.mypage-discord{
    background:#404eed;
    color:#fff;
    border-radius: 3rem;
    padding: 0.5rem;
    border: 0.2rem solid #404eed;
    display: inline-block;
}

.mypage-android{
    background:#14f21f;
    color:#000000;
    border-radius: 3rem;
    padding: 0.5rem;
    border: 0.2rem solid #000000;
    display: inline-block;
}

.mypage-discord > a
{
    color: inherit;
} 

.mypage-android > a
{
    color: inherit;
} 


.mypage-desktop-laptop {
    background:#77c2e8;
    color:#000000;
    border-radius: 3rem;
    padding: 0.5rem;
    border: 0.2rem solid #000000;
    display: inline-block;
}

.mypage-desktop-laptop > a
{
    color: inherit;
} 
/* End of "css/site.css" */
</style>
<script>
// Begin of "js/knockout-extension-contentEditable.js"
ko.bindingHandlers.htmlLazy = {
    init: function(element, valueAccessor) {
        var $element = $(element);
        var initialValue = ko.utils.unwrapObservable(valueAccessor());
        $element.text(initialValue);
      },
    update: function (element, valueAccessor) {
        var value = ko.unwrap(valueAccessor());
        var $element = $(element);
        
        if (!element.isContentEditable) {
            $element.text(value);
        }
    }
};
ko.bindingHandlers.contentEditable = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        var value = ko.unwrap(valueAccessor()),
            htmlLazy = allBindingsAccessor().htmlLazy;
        $(element).on('paste', function (event) {
            event.preventDefault();
            document.execCommand('inserttext', false, event.originalEvent.clipboardData.getData('text/plain'));
        });
        
        $(element).on("input", function () {
            if (this.isContentEditable && ko.isWriteableObservable(htmlLazy)) {
                var data = $(this); 
                htmlLazy(data.text());
            }
        });
        $(element).focusout(function(){
            var data = $(this);        
            if (!data.text().replace(" ", "").length) {
                data.empty();
            }
        });
    },
    update: function (element, valueAccessor) {
        var value = ko.unwrap(valueAccessor());
        
        element.contentEditable = value;
        
        if (!element.isContentEditable) {
            $(element).trigger("input");
        }
    }
};
// End of "js/knockout-extension-contentEditable.js"
</script>

    
<script>
// Begin of "js/lookup.js"
var lookup = {
};
lookup.Notes = ko.observableArray([]);
lookup.ColorPresets = ko.observableArray([]);
lookup.Connections = ko.observableArray([]);
lookup.history = ko.observableArray([]); 

// End of "js/lookup.js"
</script>
<script>
// Begin of "js/model_Connection.js"
lookup.model_Connection = function(data)
{
    var id = data.id;
    var sourceId = data.sourceId;
    var destinationId = data.destinationId;
    var label = data.label;
    var generated = data.generated;
    var findNodeByIdFunc = data.findNodeByIdFunc;

    var self = this;
    self.id = id;
    self.SourceId = sourceId;
    self.DestinationId = destinationId;
    self.Source = findNodeByIdFunc(self.SourceId);
    self.Destination = findNodeByIdFunc(self.DestinationId);
    self.DestinationCard = lookup.hashCards[self.DestinationId];
    self.Destination.isReferenced(true);
    self.Destination.AddExternalReferencedBy(self);
    self.label = ko.observable(label);
    if(typeof(data.textChangedHandler) != "undefined")
    {
        self.label.subscribe(function(changes)
        {
            data.textChangedHandler(changes, self);
        });
    }
    self.labelAlmost = ko.computed(function()
    {
        var valueToCheck = self.label();
        if( 
            typeof(valueToCheck) == "undefined" ||
             valueToCheck == null || 
             valueToCheck == "")
             {
                 return "";
             }
        else
        {
            return valueToCheck;
        }
    });
    self.labelUpdateCallback;
    self.generated = generated ? generated : false;
    self.underEdit = ko.observable(false);
    self.ConvertToJs = function() {
        return {
            id: self.id,
            SourceId: self.SourceId,
            DestinationId:  self.DestinationId,
            label: self.label(),
            generated: generated
        };
    };
    self.switchDone = function()
    {
        self.Destination.switchDone();
    }

    self.toolBoxVisible = ko.observable(false);
    self.switchToolBoxVisibility = function()
    {
        self.toolBoxVisible(!self.toolBoxVisible());
    };
    self.DisplayNextLevel = ko.observable(true);
    self.SwitchDisplayNextLevel = function()
    {
        self.DisplayNextLevel(!self.DisplayNextLevel());
    };
    self.toUnlink = ko.observable(false);
    self.prepareToUnlink = function()
    {
        self.toUnlink(true);
    };
    self.cancelUnlink = function()
    {
        self.toUnlink(false);
    };
    self.confirmUnlink = function()
    {
        lookup.RemoveConnection(self);
    };

};
// End of "js/model_Connection.js"
</script>
<script>
// Begin of "js/model_Node.js"
// DEPRECATED: use model_Operation.js instead


lookup.model_Node = function(data)
{
    // DEPRECATED: use model_Operation.js instead
    var self = this;
    self.id = data.id;
    self.text = ko.observable(data.text);
    if(typeof(data.textChangedHandler) != "undefined")
    {
        self.text.subscribe(function(changes)
        {
            data.textChangedHandler(changes, self);
        });
    }

    self.color = data.color;
    self.createDate = data.createDate;
    if(typeof(data.isDone) != "undefined")
    {
        self.isDone = ko.observable(data.isDone);
    }
    else
    {
        self.isDone = ko.observable(false);
    }
    self.switchDone = function()
    {
        self.isDone(!self.isDone());
        var info = self.ConvertToJs();
        lookup.pushToHistory({
            action: lookup.actions.NoteUpdated,
            data: info
        });

    }

    self.IsForSearchResult = function(query)
    {
        
        var entry = lookup.dictionary_of_notes[query];
        if(typeof(entry) !== 'undefined')
        {
            var own_id_entry = entry[self.id];
            if(typeof(own_id_entry) !== 'undefined' )
            {
                return own_id_entry;
            }
            else
            {
                return false;
            }
        }
        else
        {
            return false;
        }
        
    };

    // DEPRECATED: use model_Operation.js instead

    self.hasIncomingConnection = data.hasIncomingConnection;

    self.isReferenced = ko.observable(false);
    self.ReferencedBy = ko.observableArray([]);
    self.ReferencedByWrapped = ko.pureComputed(function()
    {
        return ko.utils.arrayMap(self.ReferencedBy(), function(elem)
        {
            var item = elem.Source;
            var result = {
                color: item.color,
                id: item.id,
                parentNodeId: self.id,
                textSplitted: ko.pureComputed(function()
                {
                    return ko.utils.arrayMap(item.textSplitted(), function(elemWord)
                    {
                        return {
                            word: elemWord.word,
                            wordNode: elemWord.wordNode,
                            wordQuery: elemWord.wordQuery,
                            exists: elemWord.exists,
                            isUrl: elemWord.isUrl,
                            parentNodeId: self.id
                        };

                    });
                })
            };
            return result;
        })
    });
    self.AddExternalReferencedBy = function(data)
    {
        var filtered =  
            ko.utils.arrayFilter
            (
                self.ReferencedBy(),
                function(item)
                { 
                    return  item.Source.id === data.Source.id;
                } 
            );
        if(filtered.length === 0)
        {
            self.ReferencedBy.push(data);
        }
    };
    
    
    // DEPRECATED: use model_Operation.js instead

    if(typeof(self.color) == "undefined" || self.color == null)
    {
        self.color = '#d190ff';
    }
    


    self.ConvertToJs = function() {
        return {
            id: self.id,
            text: self.text(),
            color: self.color,
            createDate: self.createDate,
            isDone: self.isDone(),
            hasIncomingConnection: self.hasIncomingConnection
        };
    };

    if(typeof(self.createDate) == "undefined" || self.createDate == null)
    {
        self.createDate = new Date();
        if(self.id !== -1 )
        {
            var info = self.ConvertToJs();
            lookup.pushToHistory({
                action: lookup.actions.NoteUpdated,
                data: info
            });
        }
        // DEPRECATED: use model_Operation.js instead
    }
    else
    {
        self.createDate = new Date(self.createDate);
    }

    self.textSplitted = ko.pureComputed(function(){
        var anotherDummyTriggerCall = lookup.dictionary_of_notes_updated();
        var all_words = self.text().split(" ");

        // DEPRECATED: use model_Operation.js instead
        var result = ko.utils.arrayMap(all_words, function(item)
            {
                var toSearch = 
                    item
                    .replace("\r", " ")
                    .replace("\n", " ")
                    .replace("\t", " ")
                    .toLowerCase()
                    .trim();
                
                if(
                    toSearch.endsWith(",") 
                    || toSearch.endsWith(".") 
                    || toSearch.endsWith("?")
                    || toSearch.endsWith("!")
                )
                {
                    toSearch = toSearch.substring(0, toSearch.length - 1);
                }

                var found = lookup.dictionary_of_notes[toSearch];
                return {
                    word: item,
                    wordQuery: toSearch,
                    wordNode: found,
                    exists: typeof(found) !== 'undefined',
                    isUrl: item.startsWith("https://"),
                    parentNodeId: self.id
                };
            }
        );
        // DEPRECATED: use model_Operation.js instead
        return result;
    });
};
// End of "js/model_Node.js"
</script>
<script>
// Begin of "js/model_ColorPreset.js"
lookup.model_ColorPreset = function(data)
{

    var self = this;
    self.Background = ko.observable(data.background);
    self.Color = ko.observable(data.color);
    self.ConvertToJs = function() {
        return {
            Color: self.Color(),
            Background: self.Background()
        };
    };
};
// End of "js/model_ColorPreset.js"
</script>
<script>
// Begin of "js/model_Card.js"
lookup.model_Card = function(data)
{   
    // DEPRECATED: use model_Operation.js instead
    var self = this;
    self.Note = data.Note;
    self.isRoot = typeof(data.connections_incoming) === 'undefined';
    self.hasTags = typeof(data.connections_outgoing) !== 'undefined';
    self.Tags = ko.observableArray([]);

    self.ConvertToJs = function()
    {
        var data = {};
        data.Note_serialized = self.Note.ConvertToJs();
        data.connections_incoming = self.isRoot ? undefined : [];
        data.connections_outgoing = self.hasTags ? [] : undefined;
        return data;
    }

    self.AdditionalInformationText = ko.observable("");
    self.AdditionalInformationTextVisible = ko.observable(false);
    self
        .AdditionalInformationTextVisible
        .subscribe(function(data) 
        {
            if(data)
            {
                self.AdditionalInformationTextFocus(true);
            }
        });
    self.AdditionalInformationTextFocus = ko.observable(false);
    self.AnalyzeText = function(text, query)
    {
        return text.toLowerCase().indexOf(query) >= 0
    };
    self.IsForSearchResult = function(query)
    {
        var result = self.Note.IsForSearchResult(query);
        if(result)
        {
            return result;
        }
        var filtered =  
            ko.utils.arrayFilter
            (
                self.SmallTags(),
                function(item)
                { 
                    var result = 
                        item.Destination.IsForSearchResult(query)
                    return result; 
                } 
            );
        var tagsAnyPassed = filtered.length > 0 ;
        if(tagsAnyPassed)
        {
            return true;
        }
        var filteredReferencedBy =  
            ko.utils.arrayFilter
            (
                self.Note.ReferencedBy(),
                function(item)
                { 
                    var result = 
                        item.Source.IsForSearchResult(query);
                    return result; 
                } 
            );

        var referencedByPassed = filteredReferencedBy.length > 0;
        return referencedByPassed;
    };
    self.underEdit = ko.observable(false);
    
    self.AdditionalInformationTextColor = ko.observable(lookup.GetRandomColor().Color());
    self.toolBoxVisible = ko.observable(false);
    self.switchToolBoxVisibility = function()
    {
        self.toolBoxVisible(!self.toolBoxVisible());
        return true;
    };

    self.markAsDone = function()
    {
        event.stopPropagation();
        self.convertTo("done");
        self.convertFrom("not-done");
    };
    self.removeDone = function()
    {
        event.stopPropagation();
        self.convertFrom("done");
        self.convertTo("not-done");
    }

    self.toBeRemoved = ko.observable(false);
    self.prepareToBeRemoved = function()
    {
        self.toBeRemoved(true);
    }
    self.rollbackRemoval = function()
    {
        self.toBeRemoved(false);
    }
    self.completlyRemoved = ko.observable(false);
    self.reallyRemove = function()
    {
        self.completlyRemoved(true);
        // remove incoming references
        ko.utils.arrayForEach
        (
            self.Note.ReferencedBy(), 
            function(item) 
            {
                lookup.RemoveConnection(item);
            }
        );
        
        //remove tags
        ko.utils.arrayForEach
        (
            self.SmallTags(), 
            function(item) 
            {
                lookup.RemoveConnection(item);
                lookup.RemoveNote({Note: item.Destination });
            }
        );
        lookup.RemoveNote(self);
    }

    self.isTask = ko.pureComputed(function()
    {
        return self.hasSmallTag("task");
    });

    self.isDone = ko.pureComputed(function()
    {
        return self.hasSmallTag("done");
    });

    self.hasSmallTag = function(tag)
    {
        tag = tag.toLowerCase().trim();
        var foundTaskTag = ko.utils.arrayFirst(self.SmallTags(), function(item){
            return item.Destination.text().toLowerCase().trim() === tag;
        });
        return  typeof(foundTaskTag) !== 'undefined';
    };


    self.convertFromTask = function()
    {
        self.convertFrom("task");
    };

    self.convertFrom = function(tag)
    {
        tag = tag.toLowerCase().trim();
        var foundTaskTags = 
        ko.utils.arrayFilter(self.SmallTags(),
            function(item)
            {
                return item.Destination.text().toLowerCase().trim() === tag;
            });
        ko.utils.arrayForEach
        (
            foundTaskTags, 
            function(item) 
            {
                lookup.RemoveConnection(item);
                lookup.RemoveNote({Note: item.Destination });
            }
        );
        
    };

    self.removeTag = function(item)
    {
        lookup.RemoveConnection(item.originalTag);
        lookup.RemoveNote({Note: item.originalTag.Destination });
    };

    self.convertToTask = function()
    {
        self.convertTo("task");
    };

    self.convertTo = function(tag)
    {
        tag = tag.toLowerCase().trim();
        if(self.hasSmallTag(tag) === false)
        {
            lookup.AddInformationToExistingOne(self, tag);
        }
    };

    self.isSmallTagChecker = function(item)
    {
        if(typeof(item.DestinationCard) !== 'undefined' 
            && item.DestinationCard.Tags().length > 0)
        {
            return false;
        }
        else
        {
            return item.Destination.text().length < 20;
        }
    };

    self.SmallTags = ko.pureComputed(function()
    {
        return ko.utils.arrayFilter(self.Tags(), function(item)
        {
            return self.isSmallTagChecker(item);
        })
    });

    self.SmallTagsWrapped = ko.pureComputed(function()
    {
        return ko.utils.arrayMap(self.SmallTags(), function(elem)
        {
            var item = elem.Destination;
            var result = {
                originalTag: elem,
                color: item.color,
                id: item.id,
                parentNodeId: self.Note.id,
                textSplitted: ko.pureComputed(function()
                {
                    return ko.utils.arrayMap(item.textSplitted(), function(elemWord)
                    {
                        return {
                            word: elemWord.word,
                            wordNode: elemWord.wordNode,
                            wordQuery: elemWord.wordQuery,
                            exists: elemWord.exists,
                            isUrl: elemWord.isUrl,
                            parentNodeId: self.Note.id
                        };

                    });
                })
            };
            return result;
        })
    });

    self.BigTags = ko.pureComputed(function()
    {
        return ko.utils.arrayFilter(self.Tags(), function(item)
        {
            return self.isSmallTagChecker(item) === false;
        })
    });
};
// End of "js/model_Card.js"
</script>

<script>
// Begin of "js/load_aliases.js"
lookup.load_aliases = function()
    {
        // if there is no aliases => generate them
        // save last processed importing date
        var data = {};
        if(typeof(lookup.localStorage["Aliases"]) !== 'undefined')
        {
            data.Aliases = lookup.localStorage.getItem("Aliases");
            lookup.backendWorker.sendQuery('populate_Aliases', data);
        }
        else
        {
            lookup.backendWorker.sendQuery('regenerate_Aliases', data);
        }
    };
// End of "js/load_aliases.js"
</script>
<script>
// Begin of "js/save_Aliases_to_storage.js"
lookup.save_Aliases_to_storage = function(to_save)
    {
        lookup.localStorage.setItem("Aliases", JSON.stringify(to_save));
    };
// End of "js/save_Aliases_to_storage.js"
</script>
    
<script>
// Begin of "js/findNodeById.js"
lookup.findNodeById_buffer = undefined;
lookup.findNodeById_notFound = new lookup.model_Node({id: -1, text: 'not found'});
lookup.findNodeById = function(id)
{
    if(typeof(lookup.findNodeById_buffer) == "undefined")
    {
        lookup.findNodeById_buffer = {};
        ko.utils.arrayForEach
        (
            lookup.Notes(), 
            function(item) 
                {
                    lookup.findNodeById_buffer[item.id] = item;
                }
        );
    }

    var result = lookup.findNodeById_buffer[id];
    if(typeof(result) == "undefined")
    {
        var filtered = ko.utils.arrayFilter(lookup.Notes(), function(item){ return item.id == id;} );
        result = filtered.length > 0 ? filtered[0] : undefined;
    }
    if(typeof(result) === 'undefined')
    {
        result = lookup.findNodeById_notFound;
    }

    return result;

};
// End of "js/findNodeById.js"
</script>
<script>
// Begin of "js/findEdgeById.js"
lookup.findEdgeById_buffer = undefined;
lookup.findEdgeById = function(id)
{
    if(typeof(lookup.findEdgeById_buffer) == "undefined")
    {
        lookup.findEdgeById_buffer = {};
        ko.utils.arrayForEach
        (
            lookup.Connections(), 
            function(item) 
                {
                    lookup.findEdgeById_buffer[item.id] = item;
                }
        );
    }
    var result = lookup.findEdgeById_buffer[id];
    if(typeof(result) == "undefined")
    {
        var filtered = ko.utils.arrayFilter(lookup.Connections(), function(item){ return item.id == id;} );
        result = filtered.length > 0 ? filtered[0] : undefined;
    }

    
    return result;

};
// End of "js/findEdgeById.js"
</script>
<script>
// Begin of "js/defineLocalStorage.js"
lookup.defineLocalStorage_storageAvailable = function(type) {
    try {
        var storage = window[type],
            x = '__storage_test__';
        storage.setItem(x, x);
        storage.removeItem(x);
        return true;
    }
    catch(e) {
        return e instanceof DOMException && (
            // everything except Firefox
            e.code === 22 ||
            // Firefox
            e.code === 1014 ||
            // test name field too, because code might not be present
            // everything except Firefox
            e.name === 'QuotaExceededError' ||
            // Firefox
            e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&
            // acknowledge QuotaExceededError only if there's something already stored
            storage.length !== 0;
    }
}

lookup.localStorage = undefined;
lookup.defineLocalStorage = function()
{
    if (lookup.defineLocalStorage_storageAvailable('localStorage')) {
        lookup.localStorage = window['localStorage'];
    }
    else {
        // Too bad, no localStorage for us
        alert("No local storage");
    }
};

// End of "js/defineLocalStorage.js"
</script>
<script>
// Begin of "js/findCardByMainNodeId.js"
lookup.findCardByMainNodeId = function(mainId)
{
    var found = lookup.hashCards[mainId];
    if(found)
    {
        return found;
    }
    else
    {
        return null;
    }
};
// End of "js/findCardByMainNodeId.js"
</script>
<script>
// Begin of "js/jumpToCardFromWord.js"
lookup.jumpToCardFromWord = function(data)
{
    const drag_threshold = 1.5 * lookup.body_anchorWidth();
    if ( lookup.body_total_movement_while_drag() > drag_threshold )
        return true;
    lookup.pushToSearchNotesQueryText(data.wordQuery);
    lookup.resetGlobalOffsetY();
    
    //event.stopPropagation();
    return true;
};
// End of "js/jumpToCardFromWord.js"
</script>
<script>
// Begin of "js/jumpToCardFromQuote.js"
lookup.jumpToCardFromQuote = function(data)
{
    var destinationCard = lookup.findCardByMainNodeId(data.id);
    if(destinationCard != null)
    {
        lookup.pushToSearchNotesQuery(destinationCard);
        lookup.resetGlobalOffsetY();
    }
    event.stopPropagation();

};
// End of "js/jumpToCardFromQuote.js"
</script>
<script>
// Begin of "js/open_url.js"
lookup.open_url = function(data)
{
    console.log(data);
    const drag_threshold = 1.5 * lookup.body_anchorWidth();
    if ( lookup.body_total_movement_while_drag() > drag_threshold )
        return true;
    window.open(data.word, '_blank');
    return true;
}
// End of "js/open_url.js"
</script>

<script>
// Begin of "js/SearchNotesQuery.js"
lookup.SearchNotesQuery = ko.observable("");
// lookup.SearchNotesQuery
//     .extend({ rateLimit: 150 });

lookup.SearchNotesQuery
    .subscribe(function()
    {
        if(typeof(lookup.backendWorker) !== 'undefined')
        {
            lookup.backendWorker.sendQuery('SearchNotesQuery', lookup.SearchNotesQuery());

        }
        
    });
// End of "js/SearchNotesQuery.js"
</script>
<script>
// Begin of "js/pushToSearchNotesQuery.js"
lookup.stackSearchNotesQuery = ko.observableArray([]);
lookup.pushToSearchNotesQuery = function(dataCard)
{
    var currentValue = lookup.SearchNotesQuery().trim();
    
    
    lookup.stackSearchNotesQuery.push(
        {
            query: currentValue,
            scrollPosition: lookup.viewportScrollPosition(),
            amountOfCardsLimit: lookup.CurrentResultLimit()
        }
    );


    var newQuery = dataCard.Note.text().trim();
    lookup.SearchNotesQuery(newQuery);
    lookup.ResetCurrentResultLimit();
};
// End of "js/pushToSearchNotesQuery.js"
</script>
<script>
// Begin of "js/pushToSearchNotesQueryText.js"
lookup.pushToSearchNotesQueryText = function(query)
{
    var currentValue = lookup.SearchNotesQuery().trim();
    
    
    lookup.stackSearchNotesQuery.push(
        {
            query: currentValue,
            scrollPosition: lookup.globalOffsetY(),
            amountOfCardsLimit: lookup.CurrentResultLimit()
        }
    );


    var newQuery = query.trim();
    lookup.SearchNotesQuery(newQuery);
    lookup.ResetCurrentResultLimit();
};
// End of "js/pushToSearchNotesQueryText.js"
</script>
<script>
// Begin of "js/rollbackSearchNotesQuery.js"
lookup.stackSearchNotesQuery = ko.observableArray([]);
lookup.rollbackSearchNotesQuery = function()
{
    if(lookup.stackSearchNotesQuery().length > 0)
    {
        previousQuery = lookup.stackSearchNotesQuery.pop();
        lookup.globalOffsetY(previousQuery.scrollPosition);
        lookup.SearchNotesQuery(previousQuery.query);
        lookup.SetCurrentResultLimit(previousQuery.amountOfCardsLimit)
    }
    else
    {
        lookup.SearchNotesQuery("");
        lookup.resetGlobalOffsetY();
    }
    
};
// End of "js/rollbackSearchNotesQuery.js"
</script>

<script>
// Begin of "js/GetRandomColor.js"
lookup.GetRandomColor = function() {
    var selectedColorIndex = Math.floor(Math.random() * lookup.ColorPresets().length);
    var selectedColor = lookup.ColorPresets()[selectedColorIndex];
    return selectedColor;
};
// End of "js/GetRandomColor.js"
</script>
<script>
// Begin of "js/MigrationOfColorOfNode.js"
lookup.MigrationOfColorOfNode = function(node)
{
    if(typeof(node.color) === "undefined" )
    {
        var selectedColor = lookup.GetRandomColor();
        lookup.ColorNodeFromCode(selectedColor, node);
    }
    else
    {
        var color_exists = lookup.for_code_access_hash_of_color_presets[node.color];
        if( typeof(color_exists) === "undefined")
        {
            var selectedColor = lookup.GetRandomColor();
            lookup.ColorNodeFromCode(selectedColor, node);
        }
    }
    

};
// End of "js/MigrationOfColorOfNode.js"
</script>
<script>
// Begin of "js/switchExpandedCardTagsList.js"
lookup.switchExpandedCardTagsList = function(card)
{
    card.isCardExpanded(!card.isCardExpanded())
};
// End of "js/switchExpandedCardTagsList.js"
</script>
<script>
// Begin of "js/switchAdditionalInformationText.js"
lookup.switchAdditionalInformationText = function(card)
{
    card.AdditionalInformationTextVisible(!card.AdditionalInformationTextVisible());
    if(card.AdditionalInformationTextVisible())
    {
        lookup.beginToTagOrQuote(card);
    }
};
// End of "js/switchAdditionalInformationText.js"
</script>
<script>
// Begin of "js/searchBarKeyPress.js"
lookup.searchBarKeyPress = function(data, event) 
{
    if(event.shiftKey)
    {
    }
    else
    {
        if(event.keyCode == 13)
        {
            lookup.CreateNoteFromSearchQuery();
        }
    }
    return true;
};
// End of "js/searchBarKeyPress.js"
</script>
<script>
// Begin of "js/additionalInfoKeyPress.js"
lookup.additionalInfoKeyPress = function(data, event) 
{
    if(event.shiftKey)
    {

    }
    else
    {
        if(event.keyCode == 13)
        {
            lookup.AddNoteToExistingOne();
        }
    }
    return true;
};
// End of "js/additionalInfoKeyPress.js"
</script>
<script>
// Begin of "js/pushToHistory.js"
lookup.pushToHistory = function(item) {
    
};
// End of "js/pushToHistory.js"
</script>
<script>
// Begin of "js/Instanciate_model_node.js"
lookup.Instanciate_model_node = function(data)
    {
        data.textChangedHandler = function(changes, model) 
        {
            if(changes 
                //&& changes != model.text()
                )
            {
                var toSend = model.ConvertToJs();
                toSend.text = changes;
                
                lookup.pushToHistory({
                        action: lookup.actions.NoteUpdated,
                        data: toSend
                    }
                );
            }
        };
        var result = new lookup.model_Node(data);
        return result;
    };
// End of "js/Instanciate_model_node.js"
</script>
<script>
// Begin of "js/ConnectNotes.js"
lookup.ConnectNotes = function(from, to, label, generated) {
    var connectionToAdd = lookup.Instanciate_model_connection(
        {
            id: lookup.getLocalIndex(),
            sourceId: from.id,
            destinationId: to.id,
            label: label ? label : "", 
            generated: generated,
            findNodeByIdFunc: lookup.findNodeById
        }
    );
    var added = connectionToAdd.ConvertToJs();
    var filtered = ko.utils.arrayFilter(
        lookup.Connections(), 
        function(item)
            { 
                return item.SourceId == connectionToAdd.SourceId &&
                    item.DestinationId == connectionToAdd.DestinationId &&
                    item.label() == connectionToAdd.label();
            } 
        );
    // don't allow to create duplicate connections
    if(filtered.length === 0)
    {
        console.log("adding connection #" + connectionToAdd.id );
        lookup.pushToHistory({
            action: lookup.actions.ConnectionAdded,
            data: added
        });
    }
    else
    {
        console.log("it is not allowed to create duplicate connections");
    }
    
};
// End of "js/ConnectNotes.js"
</script>
<script>
// Begin of "js/CreateNote.js"
lookup.CreateNote = function(obj, callback) {

    var selectedColor = lookup.GetRandomColor().Color();
    if(typeof(obj.textColor) !== "undefined")
    {
        selectedColor = obj.textColor;
    }
    var toAdd = lookup.Instanciate_model_node(
        {
            id: lookup.getLocalIndex(),
            text: obj.text,
            color: selectedColor,
            background: "inherit",
            createDate: new Date(),
            hasIncomingConnection: obj.hasIncomingConnection
        });
    var added = toAdd.ConvertToJs();
    lookup.pushToHistory({
        action: lookup.actions.NoteAdded,
        data: added
    });
    if(callback && typeof(callback) === "function") {
        callback(toAdd);
    }
};
// End of "js/CreateNote.js"
</script>
<script>
// Begin of "js/RemoveConnection.js"
lookup.RemoveConnection = function(toRemove) {
    var deleted = toRemove.ConvertToJs();
    lookup.pushToHistory({
        action: lookup.actions.ConnectionDeleted,
        data: deleted
    });
};
// End of "js/RemoveConnection.js"
</script>
<script>
// Begin of "js/RemoveNote.js"
lookup.RemoveNote = function(card) {
    var toRemove = card.Note;
    var deleted = toRemove.ConvertToJs();
    lookup.pushToHistory({
        action: lookup.actions.NoteDeleted,
        data: deleted
    });
};
// End of "js/RemoveNote.js"
</script>
<script>
// Begin of "js/migrateConnectionToNode.js"
lookup.migrateConnectionToNode = function()
{
    ko.utils.arrayForEach(lookup.Connections(), function(item) {
        if(typeof(item) !== "undefined")
        {
            if(typeof(item.label()) !== "undefined" && item.label().trim().length > 0)
            {
                var objLabel = {
                    text: item.label().trim()
                };
                // node from label
                lookup.CreateNote(objLabel, function(createdNodeFromLabel) { 
                    var objCombined = {
                        text: createdNodeFromLabel.text() + ' ' + item.Destination.text()
                    };
                    lookup.CreateNote(objCombined, function(createdNodeFromCombined) { 
                        
                        lookup.ConnectNotes(createdNodeFromCombined, createdNodeFromLabel);  
                        lookup.ConnectNotes(createdNodeFromCombined, item.Destination);  
                        lookup.ConnectNotes(item.Source, createdNodeFromCombined);  
                        lookup.RemoveConnection(item);
                    });
                });
            }

        }
        
    });

};
// End of "js/migrateConnectionToNode.js"
</script>
<script>
// Begin of "js/Instanciate_model_connection.js"
lookup.Instanciate_model_connection = function(data)
    {
        data.textChangedHandler = function(changes, model) 
        {
            if(changes  
                //&& changes != model.label()
                )
            {
                var toSend = model.ConvertToJs();
                toSend.label = changes;
                lookup.pushToHistory({
                    action: lookup.actions.ConnectionUpdated,
                    data: toSend
                });
            }
        };
        var result = new lookup.model_Connection(data);
        return result;
    };
// End of "js/Instanciate_model_connection.js"
</script>
<script>
// Begin of "js/changeBackground.js"
lookup.backgroundColor = ko.observable("#000000");
lookup.changeBackground = function() 
{
    var background = "#333333";
    lookup.backgroundColor(background);
    lookup.localStorage["backgroundColor"] = background;
};

lookup.changeBackgroundToDefault = function() 
{
    var background = "#000000";
    lookup.backgroundColor(background);
    lookup.localStorage["backgroundColor"] = background;
};

lookup.backgroundApplySaved = function() 
{
    var background = lookup.localStorage["backgroundColor"] || "#000000";
    lookup.backgroundColor(background);
};
// End of "js/changeBackground.js"
</script>
<script>
// Begin of "js/toggleMenu.js"
lookup.menuIsOpen = ko.observable(false);
lookup.menuWasAlreadyOpen=ko.observable(false);
lookup.toggleMenu = function() 
{
    lookup.menuIsOpen(!lookup.menuIsOpen());
    lookup.menuWasAlreadyOpen(true);
};
// End of "js/toggleMenu.js"
</script>
<script>
// Begin of "js/getViewPortSize.js"
lookup.viewportHeight = ko.observable(undefined);
lookup.getViewPortSize = function() {
    lookup.viewportHeight(window.innerHeight || document.documentElement.clientHeight);
    // https://gomakethings.com/how-to-test-if-an-element-is-in-the-viewport-with-vanilla-javascript/
};
// End of "js/getViewPortSize.js"
</script>


<script>
// Begin of "js/AddInformationToExistingOne.js"
lookup.AddInformationToExistingOne = function(existing, information) {
        
    // block adding of extra information if it is empty
    if(typeof(information) !== 'undefined')
    {
        information = information.trim();
        if(information.length !== 0)
        {
            var obj = {
                text: information,
                textColor: lookup.GetRandomColor().Color(),
                hasIncomingConnection: true
            };
            lookup.CreateNote(obj, function(destination) { 
                lookup.ConnectNotes(existing.Note, destination);  
            });
        }

    } 
    
};
// End of "js/AddInformationToExistingOne.js"
</script>
<script>
// Begin of "js/AddNoteToExistingOne.js"
lookup.AddNoteToExistingOne = function() {
    var existing = lookup.operationToBeQuoted();
    var isQuoteEdit = lookup.isQuoteEdit();
    var textOfQuote = lookup.actualTextOfQuote();
    var colorOfQuote = lookup.colorOfNextQuote();

    if(typeof(textOfQuote) !== "undefined")
    {
        textOfQuote = textOfQuote.trim();
    }
    else
    {
        textOfQuote = "";
    }
    lookup.cancelAddingQuote();

    // block adding of extra information if it is empty
    if(textOfQuote.length !== 0)
    {
        var data =
        {
            quoted: 
            {
                text: existing.text,
                color: existing.color
            },
            current:
            {
                text: textOfQuote,
                color: colorOfQuote
            }

        };
        var operation =
        {
            id: 
            {
                is_local: true,
                prefix: "to-be-defined"
            },
            name: isQuoteEdit ? 'quote-edit' : 'quote',
            data: data,
            time: new Date().toISOString()
        };

        lookup.backendWorker.sendQuery('Operation_was_added', operation);
    }
};
// End of "js/AddNoteToExistingOne.js"
</script>
<script>
// Begin of "js/ColorNode.js"
lookup.ColorNode = function(colorToApply) {
        
    var toWorkWith = lookup.NoteToEdit();
    
    
    toWorkWith.color = colorToApply.Color();
    toWorkWith.background = colorToApply.Background();

    var info = toWorkWith.ConvertToJs();
    lookup.pushToHistory({
        action: lookup.actions.NoteUpdated,
        data: info
    });
};
// End of "js/ColorNode.js"
</script>
<script>
// Begin of "js/ColorNodeFromCode.js"
lookup.ColorNodeFromCode = function(colorToApply, toWorkWith) {
                
    toWorkWith.color = colorToApply.Color();
    toWorkWith.background = colorToApply.Background();

    var info = toWorkWith.ConvertToJs();
    lookup.pushToHistory({
        action: lookup.actions.NoteUpdated,
        data: info
    });
};
// End of "js/ColorNodeFromCode.js"
</script>
<script>
// Begin of "js/CreateNoteFromSearchQuery.js"
lookup.CreateNoteFromSearchQuery = function() {
    var data = 
    {
        text: lookup.SearchNotesQuery().trim(),
        color: lookup.GetRandomColor().Color()
    };
    lookup.SearchNotesQuery("");
    if(data.text.length > 0)
    {
        lookup.resetGlobalOffsetY();
        var operation = 
        {
            id: 
            {
                is_local: true,
                prefix: "to-be-defined"
            },
            name: 'create',
            data: data,
            time: new Date().toISOString()
        };
        lookup.backendWorker.sendQuery('Operation_was_added', operation);
    }
};
// End of "js/CreateNoteFromSearchQuery.js"
</script>
<script>
// Begin of "js/getLocalIndex.js"
lookup.freeLocalIndex = 0;
lookup.localPrefix = '_local_';

lookup.getLocalIndex = function() {
    while(true)
    {
        var index = ( lookup.localPrefix + (lookup.freeLocalIndex++) );
        var searchResultEdge = lookup.findEdgeById(index);
        var searchResultNode = lookup.findNodeById(index);
        if(typeof(searchResultEdge) === 'undefined' && searchResultNode == lookup.findNodeById_notFound) 
        {
            return index;
        }
    }
};
// End of "js/getLocalIndex.js"
</script>
<script>
// Begin of "js/populateColorPresets.js"
lookup.data_color_presets = [ 
    { 
        background: "inherit",
        color: "#ffa26b" 
    },
    { 
        background: "inherit",
        color: "#84bfff" 
    },
    { 
        background: "inherit",
        color: "#ff94eb" 
    },
    { 
        background: "inherit",
        color: "#64e05e" 
    },
    { 
        background: "inherit",
        color: "#f8e755" 
    },
    { 
        background: "inherit",
        color: "#ffbbdc" 
    },
    { 
        background: "inherit",
        color: "#d190ff" 
    },
    { 
        background: "inherit",
        color: "#ff8f95" 
    }
];;

lookup.populateColorPresets = function()
{
    var toAddColors = ko.utils.arrayMap(lookup.data_color_presets, function(elem) 
    {
        var toReturn = new lookup.model_ColorPreset(elem);
        return toReturn;
    });

    ko.utils.arrayPushAll(lookup.ColorPresets, toAddColors);

};


// End of "js/populateColorPresets.js"
</script>

<script>
// Begin of "js/populate.js"
lookup.CheckIfEveryNodeHasMigratedColor = function()
    {
            ko.utils.arrayForEach(lookup.Notes(), function(item) {
                lookup.MigrationOfColorOfNode(item);
            });
    };

    lookup.composedCards = ko.observableArray([]);
    lookup.dictionary_of_notes = {};

    lookup.dictionary_of_notes_updated = ko.observable(0);

    lookup.split_search_key_and_add_to_dictionary = function(key, note_id, flag)
    {
        var index = 0;
        
        while(key.length > 0)
        {
            for(index = 0; index < key.length; index++)
            {
                var to_work_with = key.substring(index);
                var entry = lookup.dictionary_of_notes[to_work_with];
                if(typeof(entry) === 'undefined')
                {
                    lookup.dictionary_of_notes[to_work_with] = {};
                    entry = lookup.dictionary_of_notes[to_work_with];
                }
                entry[note_id] = flag;
                
            }
            key = key.substring(0, key.length - 1);
        }
    };

    lookup.generateDictionary = function()
    {
        
        ko.utils.arrayForEach(lookup.composedCards(), function(item) 
        {    
            var key = 
                item
                .Note
                .text()
                .replace("\r", " ")
                .replace("\n", " ")
                .replace("\t", " ")
                .toLowerCase()
                .trim();
            
            lookup.split_search_key_and_add_to_dictionary(key, item.Note.id, true);

        });
        var val = lookup.dictionary_of_notes_updated();
        lookup.dictionary_of_notes_updated(val + 1);
    };

    lookup.generateDictionary_NoteAdded = function(note)
    {
        
        var key = 
                note
                .text()
                .replace("\r", " ")
                .replace("\n", " ")
                .replace("\t", " ")
                .toLowerCase()
                .trim();
        lookup.split_search_key_and_add_to_dictionary(key, note.id, true);
        var val = lookup.dictionary_of_notes_updated();
        lookup.dictionary_of_notes_updated(val + 1);

    };


    lookup.populateConnections = function()
    {
        
        lookup.populateConnections_startIndex = lookup.data.connections.length -1;
        while(lookup.populateConnections_startIndex >= 0)
        {
            console.log('populateConnections: ' + lookup.populateConnections_startIndex);
            var batchArray = [];
            for(var batchKey = 0; batchKey < 100 && lookup.populateConnections_startIndex >= 0; batchKey++, lookup.populateConnections_startIndex--)
            {
                var elem = lookup.data.connections[lookup.populateConnections_startIndex];
                var connectionToAdd = lookup.Instanciate_model_connection(
                    {
                        id: elem.id,
                        sourceId: elem.SourceId,
                        destinationId: elem.DestinationId,
                        label: elem.label,
                        generated: elem.generated,
                        findNodeByIdFunc: lookup.findNodeById
                    });
                var found = lookup.hashCards[connectionToAdd.SourceId];
                if(found)
                {
                    found.Tags.unshift(connectionToAdd);
                }
                batchArray.push(connectionToAdd);

            }
            ko.utils.arrayPushAll(lookup.Connections, batchArray);

        }
        setTimeout(lookup.generateDictionary, 1);

    };


    lookup.populateNotes = function()
    {
        lookup.populateNotes_startIndex = lookup.data.notes.length -1;
        while(lookup.populateNotes_startIndex >= 0)
        {
            console.log('populateNotes: ' + lookup.populateNotes_startIndex);
            var batchArray = [];
            var cardsBatch = [];
            for(var batchKey = 0; batchKey < 100 && lookup.populateNotes_startIndex >= 0; batchKey++, lookup.populateNotes_startIndex--)
            {
                var elem = lookup.data.notes[lookup.populateNotes_startIndex];
                var noteToAdd = lookup.Instanciate_model_node(elem);
                var outgoing = lookup.outgoing_connections[noteToAdd.id];
                var incoming = lookup.incoming_connections[noteToAdd.id];
                var composedCard = new lookup.model_Card({ Note: noteToAdd, connections_incoming: incoming, connections_outgoing: outgoing });
                lookup.hashCards[noteToAdd.id] = composedCard;
                cardsBatch.push(composedCard);
                batchArray.push(noteToAdd);
            }
            ko.utils.arrayPushAll(lookup.Notes, batchArray);
            ko.utils.arrayPushAll(lookup.composedCards, cardsBatch);

        }
        lookup.populateConnections();


        

    };

    lookup.outgoing_connections = {};
    lookup.incoming_connections = {};


    lookup.populate_incoming_outgoing_connections = function()
    {
        lookup.populate_incoming_outgoing_connections_index = lookup.data.connections.length -1;
        console.log('populate_incoming_outgoing_connections: ' + lookup.populate_incoming_outgoing_connections_index);

        for(;  lookup.populate_incoming_outgoing_connections_index >= 0; lookup.populate_incoming_outgoing_connections_index--)
        {
            var elem = lookup.data.connections[lookup.populate_incoming_outgoing_connections_index];
            var stored_outgoing = lookup.outgoing_connections[elem.SourceId];
            if(typeof(stored_outgoing) === 'undefined')
            {
                lookup.outgoing_connections[elem.SourceId] = [];
                stored_outgoing = lookup.outgoing_connections[elem.SourceId];
            }
            stored_outgoing.push(elem);

            var stored_incoming = lookup.incoming_connections[elem.DestinationId];
            if(typeof(stored_incoming) === 'undefined')
            {
                lookup.incoming_connections[elem.DestinationId] = [];
                stored_incoming = lookup.incoming_connections[elem.DestinationId];
            }
            stored_incoming.push(elem);
            
        }

        lookup.populateNotes();       

    };

    lookup.populate = function(data) {
        lookup.for_code_access_hash_of_color_presets = {};
        lookup.data_color_presets.forEach(element => {
            lookup.for_code_access_hash_of_color_presets[element.color] = true;
        });
        lookup.data = data;

        lookup.populate_incoming_outgoing_connections();    
    };

lookup.populate_reset_helpers = function()
{
    lookup.populate_incoming_outgoing_connections_index = undefined;
    lookup.populateNotes_startIndex = undefined;
    lookup.populateConnections_startIndex = undefined;
};


// End of "js/populate.js"
</script>
<script>
// Begin of "js/QueryableWorker.js"
lookup.QueryableWorker = function (url, defaultListener, onError) 
{
    var instance = this;
    var worker = new Worker(url);
    var listeners = {};
    var self = this;

    self.defaultListener = defaultListener || function() {};

    if (onError) {worker.onerror = onError;}

    self.postMessage = function(message) {
      worker.postMessage(message);
    }

    self.terminate = function() {
      worker.terminate();
    }

    self.addListener = function(name, listener) {
      listeners[name] = listener;
    }

    self.removeListener = function(name) {
      delete listeners[name];
    }

    /*
      This functions takes at least one argument, the method name we want to query.
      Then we can pass in the arguments that the method needs.
    */
   self.sendQuery = function() {
      if (arguments.length < 1) {
        throw new TypeError('QueryableWorker.sendQuery takes at least one argument');
        return;
      }
      worker.postMessage({
        'queryMethod': arguments[0],
        'queryMethodArguments': Array.prototype.slice.call(arguments, 1)
      });
    }

    worker.onmessage = function(event) {
      if (event.data instanceof Object &&
        event.data.hasOwnProperty('queryMethodListener') &&
        event.data.hasOwnProperty('queryMethodArguments')) 
        {
          if(typeof(listeners[event.data.queryMethodListener]) !== 'undefined')
          {
            setTimeout(function() {
              listeners[event.data.queryMethodListener].apply(instance, event.data.queryMethodArguments);
            }, 1);
          }
          else
          {
            console.log("did not find listener for: " + event.data.queryMethodListener);
          }

          
        } else 
        {
          self.defaultListener.call(instance, event.data);
        }
    }
};
// End of "js/QueryableWorker.js"
</script>
<script>
// Begin of "js/populate.js"
lookup.CheckIfEveryNodeHasMigratedColor = function()
    {
            ko.utils.arrayForEach(lookup.Notes(), function(item) {
                lookup.MigrationOfColorOfNode(item);
            });
    };

    lookup.composedCards = ko.observableArray([]);
    lookup.dictionary_of_notes = {};

    lookup.dictionary_of_notes_updated = ko.observable(0);

    lookup.split_search_key_and_add_to_dictionary = function(key, note_id, flag)
    {
        var index = 0;
        
        while(key.length > 0)
        {
            for(index = 0; index < key.length; index++)
            {
                var to_work_with = key.substring(index);
                var entry = lookup.dictionary_of_notes[to_work_with];
                if(typeof(entry) === 'undefined')
                {
                    lookup.dictionary_of_notes[to_work_with] = {};
                    entry = lookup.dictionary_of_notes[to_work_with];
                }
                entry[note_id] = flag;
                
            }
            key = key.substring(0, key.length - 1);
        }
    };

    lookup.generateDictionary = function()
    {
        
        ko.utils.arrayForEach(lookup.composedCards(), function(item) 
        {    
            var key = 
                item
                .Note
                .text()
                .replace("\r", " ")
                .replace("\n", " ")
                .replace("\t", " ")
                .toLowerCase()
                .trim();
            
            lookup.split_search_key_and_add_to_dictionary(key, item.Note.id, true);

        });
        var val = lookup.dictionary_of_notes_updated();
        lookup.dictionary_of_notes_updated(val + 1);
    };

    lookup.generateDictionary_NoteAdded = function(note)
    {
        
        var key = 
                note
                .text()
                .replace("\r", " ")
                .replace("\n", " ")
                .replace("\t", " ")
                .toLowerCase()
                .trim();
        lookup.split_search_key_and_add_to_dictionary(key, note.id, true);
        var val = lookup.dictionary_of_notes_updated();
        lookup.dictionary_of_notes_updated(val + 1);

    };


    lookup.populateConnections = function()
    {
        
        lookup.populateConnections_startIndex = lookup.data.connections.length -1;
        while(lookup.populateConnections_startIndex >= 0)
        {
            console.log('populateConnections: ' + lookup.populateConnections_startIndex);
            var batchArray = [];
            for(var batchKey = 0; batchKey < 100 && lookup.populateConnections_startIndex >= 0; batchKey++, lookup.populateConnections_startIndex--)
            {
                var elem = lookup.data.connections[lookup.populateConnections_startIndex];
                var connectionToAdd = lookup.Instanciate_model_connection(
                    {
                        id: elem.id,
                        sourceId: elem.SourceId,
                        destinationId: elem.DestinationId,
                        label: elem.label,
                        generated: elem.generated,
                        findNodeByIdFunc: lookup.findNodeById
                    });
                var found = lookup.hashCards[connectionToAdd.SourceId];
                if(found)
                {
                    found.Tags.unshift(connectionToAdd);
                }
                batchArray.push(connectionToAdd);

            }
            ko.utils.arrayPushAll(lookup.Connections, batchArray);

        }
        setTimeout(lookup.generateDictionary, 1);

    };


    lookup.populateNotes = function()
    {
        lookup.populateNotes_startIndex = lookup.data.notes.length -1;
        while(lookup.populateNotes_startIndex >= 0)
        {
            console.log('populateNotes: ' + lookup.populateNotes_startIndex);
            var batchArray = [];
            var cardsBatch = [];
            for(var batchKey = 0; batchKey < 100 && lookup.populateNotes_startIndex >= 0; batchKey++, lookup.populateNotes_startIndex--)
            {
                var elem = lookup.data.notes[lookup.populateNotes_startIndex];
                var noteToAdd = lookup.Instanciate_model_node(elem);
                var outgoing = lookup.outgoing_connections[noteToAdd.id];
                var incoming = lookup.incoming_connections[noteToAdd.id];
                var composedCard = new lookup.model_Card({ Note: noteToAdd, connections_incoming: incoming, connections_outgoing: outgoing });
                lookup.hashCards[noteToAdd.id] = composedCard;
                cardsBatch.push(composedCard);
                batchArray.push(noteToAdd);
            }
            ko.utils.arrayPushAll(lookup.Notes, batchArray);
            ko.utils.arrayPushAll(lookup.composedCards, cardsBatch);

        }
        lookup.populateConnections();


        

    };

    lookup.outgoing_connections = {};
    lookup.incoming_connections = {};


    lookup.populate_incoming_outgoing_connections = function()
    {
        lookup.populate_incoming_outgoing_connections_index = lookup.data.connections.length -1;
        console.log('populate_incoming_outgoing_connections: ' + lookup.populate_incoming_outgoing_connections_index);

        for(;  lookup.populate_incoming_outgoing_connections_index >= 0; lookup.populate_incoming_outgoing_connections_index--)
        {
            var elem = lookup.data.connections[lookup.populate_incoming_outgoing_connections_index];
            var stored_outgoing = lookup.outgoing_connections[elem.SourceId];
            if(typeof(stored_outgoing) === 'undefined')
            {
                lookup.outgoing_connections[elem.SourceId] = [];
                stored_outgoing = lookup.outgoing_connections[elem.SourceId];
            }
            stored_outgoing.push(elem);

            var stored_incoming = lookup.incoming_connections[elem.DestinationId];
            if(typeof(stored_incoming) === 'undefined')
            {
                lookup.incoming_connections[elem.DestinationId] = [];
                stored_incoming = lookup.incoming_connections[elem.DestinationId];
            }
            stored_incoming.push(elem);
            
        }

        lookup.populateNotes();       

    };

    lookup.populate = function(data) {
        lookup.for_code_access_hash_of_color_presets = {};
        lookup.data_color_presets.forEach(element => {
            lookup.for_code_access_hash_of_color_presets[element.color] = true;
        });
        lookup.data = data;

        lookup.populate_incoming_outgoing_connections();    
    };

lookup.populate_reset_helpers = function()
{
    lookup.populate_incoming_outgoing_connections_index = undefined;
    lookup.populateNotes_startIndex = undefined;
    lookup.populateConnections_startIndex = undefined;
};


// End of "js/populate.js"
</script>
<script>
// Begin of "js/loadNotes.js"

lookup.loadNotes = function()
    {
        var data = {};
        if(typeof(lookup.localStorage["Operations"]) !== 'undefined')
        {
            data.Operations = JSON.parse(lookup.localStorage.getItem("Operations"));
            lookup.backendWorker.sendQuery('populate_Operations', data);
        }
        else
        {
            if(typeof(lookup.localStorage["Notes"]) !== 'undefined')
            {
                data.notes = JSON.parse(lookup.localStorage.getItem("Notes"));
                data.connections = JSON.parse(lookup.localStorage.getItem("Connections"));
                //lookup.populate(data);
                lookup.backendWorker.addListener('populate.finished', function()
                {
                    console.log('populate.finished');
                    lookup.backendWorker.sendQuery('migrate_to_Operations');
                });
                lookup.backendWorker.sendQuery('populate', data);
            }
            else
            {
                lookup.backendWorker.sendQuery('populate_Operations', []);
                lookup.set_option_show_help_demo_notes_to_true();
                lookup.set_option_use_Japanese_tokeniser_to_false();
            }
        }

        lookup.send_to_worker_update_for_option_show_help_demo_notes();
    };
// End of "js/loadNotes.js"
</script>
<script>
// Begin of "js/toBeEdited.js"
lookup.toBeEdited = ko.observable(undefined);
lookup.cardUnderEdit = ko.observable(undefined);
lookup.beginToEdit = function(card)
{
    lookup.cardUnderEdit(card);
    lookup.toBeEdited(card.Note.text());

};
lookup.cancelEdit = function()
{
    lookup.toBeEdited(undefined);
    lookup.cardUnderEdit(undefined);
};
lookup.applyChanges = function()
{
    lookup.cardUnderEdit().Note.text(lookup.toBeEdited());
    lookup.cancelEdit();
};
// End of "js/toBeEdited.js"
</script>
<script>
// Begin of "js/taggedOrQuotedCard.js"
lookup.taggedOrQuotedCard = ko.observable(undefined);
lookup.beginToTagOrQuote = function(card)
{
    if(typeof(lookup.taggedOrQuotedCard()) !== 'undefined')
    {
        lookup.switchAdditionalInformationText(lookup.taggedOrQuotedCard());
    }
    lookup.taggedOrQuotedCard(card);
};
lookup.cancelAddingTagOrQuote = function()
{
    if(typeof(lookup.taggedOrQuotedCard()) !== 'undefined')
    {
        lookup.switchAdditionalInformationText(lookup.taggedOrQuotedCard());
    }
    lookup.taggedOrQuotedCard(undefined);
};
// End of "js/taggedOrQuotedCard.js"
</script>
<script>
// Begin of "js/export.js"
lookup.export = function()
{
    var toExport = {};

    if(typeof(lookup.localStorage["Notes"]) !== 'undefined')
    {
        toExport.Notes = JSON.parse(lookup.localStorage.getItem("Notes"));
        toExport.Connections = JSON.parse(lookup.localStorage.getItem("Connections"));
    }
    if(typeof(lookup.localStorage["Operations"]) !== 'undefined')
    {
        toExport.Operations = JSON.parse(lookup.localStorage.getItem("Operations"));
    }

    
    var content = JSON.stringify(toExport);
    
    var dateTime = new Date();
    var fileName = "WebPad-snapshot-" + dateTime.toDateString() + ".txt";


    if (lookup.platform_is_cordova_android()) 
    {
        // document.addEventListener("deviceready", function () {
        //   // save file using codova-plugin-file
        // });
        lookup.Android_file_download(content, fileName, 'text/plain');
    } 
    else
    {
        lookup.download(content, fileName, 'text/plain');
    }
    
    


};

lookup.download = function(content, fileName, contentType) {
    var a = document.createElement("a");
    var file = new Blob([content], {type: contentType});
    a.href = URL.createObjectURL(file);
    a.download = fileName;
    a.click();
};

lookup.android_file_error_handler = function(error)
{
    alert(JSON.stringify(error));
};

lookup.Android_file_download = function(content, fileName, contentType)
{
    window.resolveLocalFileSystemURL(cordova.file.externalDataDirectory, function (dirEntry) 
    {
        dirEntry.getFile(fileName, { create: true, exclusive: false }, function (fileEntry) 
        {
            lookup.Android_write_file(fileEntry, content, contentType);
            
            
        }, lookup.android_file_error_handler);        
     });
};

lookup.Android_write_file = function(fileEntry, content, contentType)
{
    fileEntry.createWriter(function (fileWriter) {

        fileWriter.onwriteend = function() {
            console.log("Successful file write...");
            alert( "Your notes are exported to: " + fileEntry.nativeURL);
            // new attempt 2023-03-25 00:55 CET
            // var a = document.createElement("a");
            // a.href = fileEntry.nativeURL;
            // a.download = fileEntry.name;
            // a.click();
        };

        fileWriter.onerror = function (e) {
            console.log("Failed file write: " + e.toString());
        };

        
        var dataObj = new Blob([content], { type: contentType });

        fileWriter.write(dataObj);
    });

};

// End of "js/export.js"
</script>
<script>
// Begin of "js/import.js"
lookup.import = function()
{
    var selectedFiles = document.getElementById('importSnapshotFile').files;
    if(typeof(selectedFiles) !== 'undefined')
    {
        if(selectedFiles.length > 0)
        {
            var snapshotFile = selectedFiles[0];
            const reader = new FileReader();
            reader.onload = function(e) 
            { 
                var result = e.target.result; 
                var parsed = JSON.parse(result);
                if
                (
                    typeof(parsed.Notes) !== 'undefined' && 
                    typeof(parsed.Connections) !== 'undefined'
                )
                {
                    var data = {};
                    data.notes = parsed.Notes;
                    data.connections = parsed.Connections
                    lookup.backendWorker.addListener('populate.finished', function()
                    {
                        console.log('populate.finished');
                        lookup.backendWorker.sendQuery('migrate_to_Operations');
                    });
                    lookup.backendWorker.sendQuery('populate', data);
                }
                if(typeof(parsed.Operations) !== 'undefined')
                {
                    var operationsData = 
                    {
                        Operations: parsed.Operations
                    };
                    lookup.backendWorker.sendQuery('import_Operations', operationsData);
                }
                
            }; 
            reader.readAsText(snapshotFile);
        }
    }

};
// End of "js/import.js"
</script>
    
<script>
// Begin of "js/saveItemsToStorage.js"
lookup.saveItemsToStorage = function(toStoreNotes, toStoreConnections)
{
    lookup.localStorage.setItem("Notes", JSON.stringify(toStoreNotes));
    lookup.localStorage.setItem("Connections", JSON.stringify(toStoreConnections));
};

// End of "js/saveItemsToStorage.js"
</script>


<script>
// Begin of "js/jumpToCardFromOperation.js"
lookup.jumpToCardFromOperation = function(data)
{
    lookup.pushToSearchNotesQueryText(data.text);
    lookup.resetGlobalOffsetY();
    
    event.stopPropagation();
};
// End of "js/jumpToCardFromOperation.js"
</script>
<script>
// Begin of "js/jumpToCardFromQuotedOperation.js"
lookup.jumpToCardFromQuotedOperation = function(data)
{
    lookup.pushToSearchNotesQueryText(data.quoted.text);
    lookup.resetGlobalOffsetY();
    
    event.stopPropagation();
};
// End of "js/jumpToCardFromQuotedOperation.js"
</script>
<script>
// Begin of "js/operationToBeQuoted.js"
lookup.operationToBeQuoted = ko.observable(undefined);
lookup.actualTextOfQuote = ko.observable(undefined);
lookup.colorOfNextQuote = ko.observable(undefined);
lookup.isQuoteEdit = ko.observable(false);

lookup.beginToQuoteText = function(data)
{
    lookup.colorOfNextQuote(lookup.GetRandomColor().Color());
    lookup.isQuoteEdit(false);
    lookup.actualTextOfQuote("");
    lookup.operationToBeQuoted(data);
    event.stopPropagation();
};
lookup.beginToQuoteQuotedText = function(data)
{
    lookup.colorOfNextQuote(lookup.GetRandomColor().Color());
    lookup.isQuoteEdit(false);
    lookup.actualTextOfQuote("");
    lookup.operationToBeQuoted(data.quoted);
    event.stopPropagation();
};
lookup.beginToQuoteEditText = function(data)
{
    lookup.colorOfNextQuote(lookup.GetRandomColor().Color());
    lookup.isQuoteEdit(true);
    lookup.actualTextOfQuote(data.text);
    lookup.operationToBeQuoted(data);
    event.stopPropagation();
    
};
lookup.cancelAddingQuote = function()
{
    lookup.operationToBeQuoted(undefined);
};
// End of "js/operationToBeQuoted.js"
</script>
    
<script>
// Begin of "js/option_show_help_demo_notes.js"
lookup.option_show_help_demo_notes = ko.observable(false);
lookup.set_option_show_help_demo_notes_to_true = function() 
{
    lookup.option_show_help_demo_notes(true);
    lookup.localStorage["option_show_help_demo_notes"] = true;
    lookup.send_to_worker_update_for_option_show_help_demo_notes();
};

lookup.set_option_show_help_demo_notes_to_false = function() 
{
    lookup.option_show_help_demo_notes(false);
    lookup.localStorage["option_show_help_demo_notes"] = false;
    lookup.send_to_worker_update_for_option_show_help_demo_notes();
};

lookup.apply_saved_option_show_help_demo_notes = function() 
{
    var stored = lookup.localStorage["option_show_help_demo_notes"] === "true";
    lookup.option_show_help_demo_notes(stored);
    lookup.send_to_worker_update_for_option_show_help_demo_notes();
};

lookup.for_worker_apply_changes_in_option_show_help_demo_notes = function(newValue)
{
    lookup.option_show_help_demo_notes(newValue);
};

lookup.send_to_worker_update_for_option_show_help_demo_notes = function()
{
    if(typeof(lookup.backendWorker) !== 'undefined')
    {
        const valueToSend = lookup.option_show_help_demo_notes();
        lookup.backendWorker.sendQuery('for_worker_apply_changes_in_option_show_help_demo_notes', valueToSend);
    }
    
};
// End of "js/option_show_help_demo_notes.js"
</script>
<script>
// Begin of "js/option_use_Japanese_tokeniser.js"
lookup.option_use_Japanese_tokeniser = ko.observable(false);
lookup.set_option_use_Japanese_tokeniser_to_true = function() 
{
    lookup.option_use_Japanese_tokeniser(true);
    lookup.localStorage["option_use_Japanese_tokeniser"] = true;
    lookup.send_to_worker_update_for_option_use_Japanese_tokeniser();
};

lookup.set_option_use_Japanese_tokeniser_to_false = function() 
{
    lookup.option_use_Japanese_tokeniser(false);
    lookup.localStorage["option_use_Japanese_tokeniser"] = false;
    lookup.send_to_worker_update_for_option_use_Japanese_tokeniser();
};

lookup.apply_saved_option_use_Japanese_tokeniser = function() 
{
    var stored = lookup.localStorage["option_use_Japanese_tokeniser"] === "true";
    lookup.option_use_Japanese_tokeniser(stored);
    lookup.send_to_worker_update_for_option_use_Japanese_tokeniser();
};

lookup.for_worker_apply_changes_in_option_use_Japanese_tokeniser = function(newValue)
{
    lookup.option_use_Japanese_tokeniser(newValue);
};

lookup.send_to_worker_update_for_option_use_Japanese_tokeniser = function()
{
    if(typeof(lookup.backendWorker) !== 'undefined')
    {
        const valueToSend = lookup.option_use_Japanese_tokeniser();
        lookup.backendWorker.sendQuery('for_worker_apply_changes_in_option_use_Japanese_tokeniser', valueToSend);
    }
    
};
// End of "js/option_use_Japanese_tokeniser.js"
</script>
    
    


<script>
// Begin of "js/save_Operations_to_storage.js"
lookup.save_Operations_to_storage = function(toStoreOperations)
{
    lookup.localStorage.setItem("Operations", JSON.stringify(toStoreOperations));
};

// End of "js/save_Operations_to_storage.js"
</script>
<script>
// Begin of "js/globalOffsets.js"
lookup.globalOffsetY = ko.observable(0);
lookup.globalOffsetX = ko.observable(0);
lookup.globalMaxY = ko.observable(800);
lookup.globalMinY = ko.observable(800);

lookup.resetGlobalOffsetY = function()
{
    lookup.globalOffsetY(0);
};
// End of "js/globalOffsets.js"
</script>
<script>
// Begin of "js/applyMovement.js"
lookup.applyMovement = function (deltaY, deltaX) 
{
    var newOffsetY = lookup.globalOffsetY() + deltaY;
    // const max_Y = lookup.globalMaxY();
    // newOffsetY = Math.min(newOffsetY, max_Y);
    // const min_Y = lookup.globalMinY() + document.body.offsetHeight;
    // newOffsetY = Math.max(newOffsetY, min_Y);
    lookup.globalOffsetY(newOffsetY);

    // var newOffsetX = lookup.globalOffsetX() - deltaX ;
    // const max_X = lookup.globalMaxX();
    // newOffsetX = Math.min(newOffsetX, max_X);
    // const min_X = lookup.globalMinX() + document.body.offsetWidth;
    // newOffsetX = Math.max(newOffsetX, min_X);
    // lookup.globalOffsetX(newOffsetX);
    //console.log({x: newOffsetX, min_X: min_X, y: newOffsetY, min_Y: min_Y});
};
// End of "js/applyMovement.js"
</script>
<script>
// Begin of "js/body_on_wheel.js"
lookup.bodyOnWheel = function() {
    // really changing to span fixes breaks?
    // yeah if you want correct line-break use span instead of div
    // just test  
    // what if there is more text?
    
        event.preventDefault();
        const deltaY = event.deltaY;
        const deltaX = event.deltaX;
        //console.log(event);
        lookup.applyMovement(deltaY, deltaX);
      
        //scale += event.deltaY * -0.01;
    
    
    };
// End of "js/body_on_wheel.js"
</script>
<script>
// Begin of "js/model_Operation.js"
lookup.model_Operation = function(data)
{
    var self = this;
    self.id = data.id;
    self.name = data.name;
    self.data = data.data;
    self.time = data.time;

    self.bottom = ko.observable(0);

    self.globalBottom = ko.computed(() => self.bottom() + lookup.globalOffsetY());

    self.createDate = new Date(self.time);

    self.createDateToOrder = 
        "" + self.createDate.getFullYear() +
        "-" + ((self.createDate.getMonth() + 1) + "").padStart(2, "0") +
        "-" + (self.createDate.getDate() + "").padStart(2, "0") +
        "  " + (self.createDate.getHours() + "").padStart(2, "0") +
        ":" + (self.createDate.getMinutes() + "").padStart(2, "0") + 
        ":" + (self.createDate.getSeconds() + "").padStart(2, "0");

    if(self.name === 'create')
    {
        lookup.prefill_Operation(self, self.data);
    }
    if(self.name === 'quote' || self.name === 'quote-edit')
    {
        lookup.prefill_Operation(self, self.data.current);
        self.quoted = {};
        lookup.prefill_Operation(self.quoted, self.data.quoted);
    }

    self.ConvertToJs = function()
    {
        var toReturn =
        {
            id: self.id,
            name: self.name,
            data: self.data,
            time: self.time
        };
        return toReturn;
    };

    self.toolBoxVisible = ko.observable(false);
    self.switchToolBoxVisibility = function()
    {
        self.toolBoxVisible(!self.toolBoxVisible());
        return true;
    };

    self.toTupleKey = function()
    {
        var key = {name: self.name, data: self.data};
        var toReturn = JSON.stringify(key);
        return toReturn;
    };
};

lookup.split_color_from_6_hex = function(color_in_6_hex)
{
    var hex_red = '0x' + color_in_6_hex.substring(1, 3);
    var hex_green = '0x' + color_in_6_hex.substring(3, 5);
    var hex_blue = '0x' + color_in_6_hex.substring(5, 7);
    var int_red = parseInt(hex_red, 16);
    var int_green = parseInt(hex_green, 16);
    var int_blue = parseInt(hex_blue, 16);
    var colorWithIntComponents = 
    {
        red: int_red,
        green: int_green,
        blue: int_blue
    };
    return colorWithIntComponents;
};

lookup.form_rgba_string_constant = function(color_with_components, alpha)
{
    var toReturn = 'rgba(' + color_with_components.red + ', ' + color_with_components.green + ', ' + color_with_components.blue + ', ' + alpha +')' ;
    return toReturn;
};

lookup.prefill_Operation = function(self, abc) {

    self.color = abc.color;
    self.text = abc.text;
    if(typeof(abc.color) === 'undefined')
    {
        self.color_border = "#ff12ff";
    }
    else
    {
        var color_with_components = lookup.split_color_from_6_hex(abc.color);

        self.color_border = lookup.form_rgba_string_constant(color_with_components, '0.6')
    }
    var all_words = abc.text.split(" ");

    //added by  https://github.com/uprun/WebPad/commit/94fd9c41916641fbafc4fb8d62f639e384f31349?diff=split&w=1
    // by suggestion from https://github.com/minaph
    if (globalThis?.TinySegmenter && lookup.option_use_Japanese_tokeniser()) 
    {
        console.log("TinySegmenter for Japanese language is working")
        var segmenter = new TinySegmenter();
        var segmented_words = [];
        for (const word of all_words) 
        {
            if (word.toLowerCase().startsWith("https://")) 
            {
                segmented_words.push(word);
            } 
            else 
            {
                segmented_words.push(...segmenter.segment(word));
            }
        }
        all_words = segmented_words;
    }
    // end of https://github.com/uprun/WebPad/commit/94fd9c41916641fbafc4fb8d62f639e384f31349?diff=split&w=1

    self.textSplitted = ko.utils.arrayMap(all_words, function (item) {
        var toSearch = item
            .replace("\r", " ")
            .replace("\n", " ")
            .replace("\t", " ")
            .toLowerCase()
            .trim();
        
        // if url then do nothing
        if(!toSearch.startsWith("https://"))
        {
            if (
                toSearch.endsWith(",")
                || toSearch.endsWith(".")
                || toSearch.endsWith("?")
                || toSearch.endsWith("!")) 
            {
                toSearch = toSearch.substring(0, toSearch.length - 1);
            }

        }
        
        return {
            word: item,
            wordQuery: toSearch
        };
    }
    );
}

// End of "js/model_Operation.js"
</script>
<script>
// Begin of "js/check_platform.js"
lookup.platform_is_cordova = ko.observable(false);
lookup.platform_is_cordova_electron_mac = ko.observable(false);
lookup.platform_is_cordova_android = ko.observable(false);

lookup.check_platform = function()
{
    if(typeof(window.cordova) !== 'undefined')
    {
        console.log("Cordova is here");
        lookup.platform_is_cordova(true);

        if(
            typeof(navigator) !== 'undefined' && 
            (navigator.platform === "MacIntel")
        )
        {
            lookup.platform_is_cordova_electron_mac(true);
        }
        else
        {
            lookup.platform_is_cordova_android(true);
        }
    }
    else
    {
        console.log("Not a Cordova");

    }
};
// End of "js/check_platform.js"
</script>
<script>
// Begin of "js/privacy_policy_link.js"
lookup.privacy_policy_link = ko.computed(function()
{
    if(lookup.platform_is_cordova())
    {
        //&& window.cordova.platformId !== "electron"
        if(lookup.platform_is_cordova_electron_mac())
        {
            return "file:///Applications/WebPad.app/Contents/Resources/app.asar/privacy_policy_mac.html";
        }
        else
        {
            return "file:///android_asset/www/privacy_policy_android.html";
        }
        
    }
    else
    {
        return "/privacy_policy.html";
    }
});
// End of "js/privacy_policy_link.js"
</script>

<script>
// Begin of "js/patreonLinkOnClick.js"
lookup.patreonLinkOnClick = function(event)
{
    event.stopPropagation();
};
// End of "js/patreonLinkOnClick.js"
</script>

<script>
// Begin of "js/patreonSupporters.js"
// as of date 2022-07-27
lookup.patreonSupporters = ko.observableArray(
    [
        "Alexander Obenauer",
        "Justin Shaffner"
    ]
);
// End of "js/patreonSupporters.js"
</script>
<script>
// Begin of "js/codeContributors.js"
// as of date 2023-12-15
lookup.codeContributors = ko.observableArray(
    [
        "美濃 佑輝 [Yuki Minoh] Japanese tokeniser usage",
    ]
);

// End of "js/codeContributors.js"
</script>
<script>
// Begin of "js/librariesInUse.js"
// as of date 2023-12-15
lookup.librariesInUse = ko.observableArray(
    [
        {
            "library": "TinySegmenter [Japanese tokeniser]",
            "url": "http://chasen.org/~taku/software/TinySegmenter/"
        },
        {
            "library": "Knockout.js [MVVM library, two-way bindings]",
            "url": "https://knockoutjs.com/"
        },
        {
            "library": "JQuery [simplified requests to DOM]",
            "url" : "https://jquery.com/"
        },
        {
            "library": "W3.CSS [CSS presets]",
            "url": "https://www.w3schools.com/w3css/default.asp"
        },
        {
            "library": "Apache Cordova [deploy web-site as an app]",
            "url": "https://cordova.apache.org/"
        }
    ]
);

// End of "js/librariesInUse.js"
</script>

<script>
// Begin of "js/mainPage.js"


function ConnectedNotesViewModel()
{
    var self = this;
    lookup.actions = 
    {
        NoteUpdated: 'NoteUpdated',
        ConnectionUpdated: 'ConnectionUpdated',
        NoteAdded: 'NoteAdded',
        NoteDeleted: 'NoteDeleted',
        ConnectionAdded: 'ConnectionAdded',
        ConnectionDeleted: 'ConnectionDeleted',
        PositionsUpdated: 'PositionsUpdated',
        HealthCheckRequest: 'HealthCheckRequest',
        HealthCheckIdsProposal: 'HealthCheckIdsProposal'

    };

    lookup.defineLocalStorage();

    lookup.backgroundApplySaved();

    lookup.apply_saved_option_show_help_demo_notes();
    lookup.apply_saved_option_use_Japanese_tokeniser();

    lookup.hashCards = {};

    lookup.populateColorPresets();

    lookup.backendWorker = new lookup.QueryableWorker("worker-scripts/bundle-backend-worker.js?v=" + new Date().toString());

    lookup.send_to_worker_update_for_option_show_help_demo_notes();


    lookup.backendWorker.addListener('saveItemsToStorage.event', function(toStoreNotes, toStoreConnections) 
    {
        lookup.saveItemsToStorage(toStoreNotes, toStoreConnections);
    });

    lookup.backendWorker.addListener('saveOperationsToStorage.event', function(toStoreOperations) 
    {
        lookup.save_Operations_to_storage(toStoreOperations);
    });

    lookup.backendWorker.addListener('saveAliasesToStorage.event', function(toStoreAliases) 
    {
        lookup.save_Aliases_to_storage(toStoreAliases);
    });

    


    lookup.check_platform();


    lookup.LimitedFilteredOperations = ko.observableArray([]);
    //lookup.LimitedFilteredOperations.extend({ rateLimit: { timeout: 50, method: "notifyAtFixedRate" } });
    lookup.operationsToAddGradually = [];
    lookup.operationsToAddGradually_miliseconds = 10;
    lookup.operationsToAddGradually_timer = undefined;
    lookup.operationsToAddGradually_handler = function()
    {
        if(lookup.operationsToAddGradually.length > 0)
        {
            
            var to_add = lookup.operationsToAddGradually.pop();
            var length = lookup.LimitedFilteredOperations().length;
            var next_bottom = 0;
            if (length > 0)
            {
                var last_added = document.getElementById((length - 1) + "-card");

                var obj_last = lookup.LimitedFilteredOperations()[length - 1];

                next_bottom = obj_last.bottom()  + last_added.offsetHeight;
            }
            
            to_add.bottom(next_bottom);
            lookup.LimitedFilteredOperations.push(to_add);
        }
        lookup.operationsToAddGradually_timer = setTimeout(lookup.operationsToAddGradually_handler, lookup.operationsToAddGradually_miliseconds);
        
    };
    lookup.backendWorker.addListener('LimitedFilteredOperations.changed.event', function(cards) 
    {
        var start = new Date;
        console.log("start", start);
        lookup.LimitedFilteredOperations.removeAll();
        var next = new Date;
        console.log("removal diff", next - start)
        start = next;
        var processed = ko.utils.arrayMap(cards, function(item) {
            var operation = new lookup.model_Operation(item)
            return operation;
        });
        next = new Date
        console.log("creation diff", next - start)
        start = next;
        
        lookup.operationsToAddGradually = processed;
        
        next = new Date
        console.log("push all diff", next - start)
        start = next;
        if ( typeof(lookup.operationsToAddGradually_timer) === "undefined")
        {
            lookup.operationsToAddGradually_timer = setTimeout(lookup.operationsToAddGradually_handler, lookup.operationsToAddGradually_miliseconds);
        }
    });

    lookup.hidden_operations_count = ko.observable(0);
    lookup.backendWorker.addListener('NumberOfHiddenOperations.changed', function(length) 
    {
        lookup.hidden_operations_count(length);
    });

    lookup.CurrentResultLimit = ko.observable(45);

    lookup.backendWorker.addListener('CurrentResultLimit.changed', function(length) 
    {
        lookup.CurrentResultLimit(length);
    });

    lookup.backendWorker.addListener('populate_Operations.finished', function(length) 
    {
        //[2022-05-01] no aliases for current release, I will create a seperate UI-screen for adding them
        lookup.load_aliases();
    });

    lookup.backendWorker.addListener('import_Operations.finished', function(length) 
    {
        lookup.backendWorker.sendQuery('regenerate_Aliases');
    });

    lookup.ExtendCurrentResultLimit = function()
    {
        lookup.onListChanged_keepHeightOffset();
        lookup.backendWorker.sendQuery("ExtendCurrentResultLimit");
    };

    lookup.ResetCurrentResultLimit = function()
    {
        lookup.backendWorker.sendQuery("ResetCurrentResultLimit");
    };

    lookup.SetCurrentResultLimit = function(value)
    {
        lookup.backendWorker.sendQuery("SetCurrentResultLimit", value);
    };

    if(typeof(Worker) == "undefined") {
        console.log("Failed to find Worker.");
    }
    if(!lookup.localStorage) {
        console.log("Local web-storage is unavailable.");
    }
  
    self.ApplyLookupToSelf = function()
    {
        for(var x in lookup)
        {
            self[x] = lookup[x];
        }
    };

    

};


// End of "js/mainPage.js"
</script>
<script>
// Begin of "js/cardAfterRender.js"
lookup.cardAfterRender = function()
{
    return;
    var cards = lookup.LimitedFilteredOperations();
    // var renderedItems = ko.utils.arrayFilter(cards, 
    //     function(item)
    //     { 
    //         try
    //         {
    //             var searchResult = $('#'+item.Note.id);
    //             return searchResult.length > 0;

    //         }
    //         catch(error)
    //         {
    //             console.log("failed search query was : " + '#'+item.Note.id)
    //         }
    //         return true;
    //     } );
    // var isCompletelyRendered = renderedItems.length === cards.length;
    var numberOfRenderedCards = $(".webpad-card").length;
    var isCompletelyRendered = cards.length === numberOfRenderedCards;
    if(isCompletelyRendered)
    {
        lookup.listRenderedCompletely();
    }
    
};
// End of "js/cardAfterRender.js"
</script>
<script>
// Begin of "js/body_anchorWidth.js"
lookup.body_anchorWidth = ko.observable(0);
// End of "js/body_anchorWidth.js"
</script>
<script>
// Begin of "js/body_is_dragged.js"
lookup.body_is_dragged = ko.observable(false);
// End of "js/body_is_dragged.js"
</script>
<script>
// Begin of "js/body_onmousedown.js"
lookup.body_onmousedown = function()
{
    console.log(event);
    lookup.body_is_dragged(true);
    lookup.body_total_movement_while_drag(0)
};
// End of "js/body_onmousedown.js"
</script>
<script>
// Begin of "js/body_onmousemove.js"
lookup.body_onmousemove = function()
{
    console.log(event);
    if(lookup.body_is_dragged())
    {
        const deltaX = event.movementX;
        const deltaY = event.movementY;
        lookup.applyMovement(-deltaY, deltaX);
        lookup.body_total_movement_while_drag(lookup.body_total_movement_while_drag() + Math.abs(deltaX) + Math.abs(deltaY));
    }
    else
    {
        //console.log("NO DRAG");
    }
};
// End of "js/body_onmousemove.js"
</script>
<script>
// Begin of "js/body_onmouseleave.js"
lookup.body_onmouseleave = function()
{
    console.log(event);
    lookup.body_is_dragged(false);
};
// End of "js/body_onmouseleave.js"
</script>
<script>
// Begin of "js/body_onmouseup.js"
lookup.body_onmouseup = function()
{
    console.log(event);
    lookup.body_is_dragged(false);
};

// End of "js/body_onmouseup.js"
</script>
<script>
// Begin of "js/body_total_movement_while_drag.js"

lookup.body_total_movement_while_drag = ko.observable(0);
// End of "js/body_total_movement_while_drag.js"
</script>
<script>
// Begin of "js/bodyOnClick.js"
lookup.bodyOnClick = function(e)
{
    //console.log(event);
    var offset = 
    {
        x: event.pageX,
        y: event.pageY
    };

    const drag_threshold = 3 * lookup.body_anchorWidth();
    if ( lookup.body_total_movement_while_drag() > drag_threshold )
    {
        // to prevent click handler after drag, but allow it if drag was small
        lookup.body_total_movement_while_drag(0);
        return;
    }

    if(lookup.menuIsOpen() || lookup.optionsIsOpen())
    {
        lookup.hideMenu();
        lookup.hideOptions();
    }

    lookup.showOmniBox();
};
// End of "js/bodyOnClick.js"
</script>
<script>
// Begin of "js/bodyOnTouchEnd.js"
lookup.bodyOnTouchEnd = function()
{
    lookup.previosTouch = undefined;
};
// End of "js/bodyOnTouchEnd.js"
</script>
<script>
// Begin of "js/bodyOnTouchMove.js"
lookup.bodyOnTouchMove = function()
{
    //console.log(event);
    var touches = event.changedTouches;
    if(touches.length > 0 )
    {
        const clientX = touches[0].clientX;
        const clientY = touches[0].clientY;
        if(typeof(lookup.previosTouch) !== "undefined")
        {
            var deltaX = lookup.previosTouch.x - clientX;
            var deltaY = lookup.previosTouch.y - clientY;
            lookup.applyMovement(deltaY, deltaX);
        }
        lookup.previosTouch = {x: clientX, y: clientY};
    }
};
// End of "js/bodyOnTouchMove.js"
</script>
<script>
// Begin of "js/document_ready_ideas.js"
$(document).ready(function()
{
    var viewModel = new ConnectedNotesViewModel();
    viewModel.ApplyLookupToSelf();
    ko.applyBindings(viewModel);
    viewModel.getViewPortSize();
    window.addEventListener('resize', function(){  viewModel.getViewPortSize(); }, true);
    viewModel.loadNotes();
    viewModel.check_platform();
    console.log("anchor", document.getElementById("menu-icon-id").offsetHeight);
    const menu_icon = document.getElementById("menu-icon-id");
    console.log(menu_icon);
    lookup.body_anchorWidth( menu_icon.offsetHeight);
});
// End of "js/document_ready_ideas.js"
</script>
    <script language="JavaScript" type="text/javascript" src="cordova.js" lisperanto-skip-bundle="true"></script>
<script>
// Begin of "js/on_resize.js"
lookup.on_resize = function()
{
    var search_results = document.getElementById("webpad-search-results-absolute-position");
    const width = search_results.getBoundingClientRect().width;
    var total_width = window.innerWidth;
    var spare_size = Math.round( (total_width - width) / 2.0 );
    search_results.style.left = spare_size + "px";
    console.log("on_resize");
};
// End of "js/on_resize.js"
</script>
<script>
// Begin of "js/body_on_load.js"
lookup.body_on_load = function()
{
    console.log("body_on_load");
    lookup.on_resize();
    const menu_icon = document.getElementById("menu-icon-id");
    console.log(menu_icon);
    lookup.body_anchorWidth( menu_icon.offsetHeight);
};
// End of "js/body_on_load.js"
</script>
    

</head>

<script type="text/html" id="additional-toolbox-template">
            
    <span class="webpad-extra-information-plus-icon" data-bind="ifnot: $data.AdditionalInformationTextVisible">
        &nbsp;
        <span>
            <div
                class="webpad-brightness-dimmed webpad-button-no-border prevent-select cursor-pointer" 
                style="border-style: solid; border-width: 0.2rem; border-color: #f8e755; border-radius: 0.7rem; font-size: 1.4rem;"
                data-bind=" click: $root.switchAdditionalInformationText">
                <span class="" style="color: #84bfff; vertical-align: middle; margin-left: 0.5rem;" alt="hashTagBeginSymbol"></span>
                <img src="svg/quote-left-sky.svg" class="webpad-edit-pencil" alt="Add information" /> 
                <img src="svg/plus.svg" class="webpad-edit-pencil" style="margin-right: 0.5rem;" alt="Edit"/> 
            </div>
        </span>
        &nbsp;
        <span
            data-bind="ifnot: $data.isTask()" >
            <div
                class="webpad-brightness-dimmed webpad-button-no-border prevent-select cursor-pointer" 
                style="border-style: solid; border-width: 0.2rem; border-color: #f8e755; border-radius: 0.7rem; font-size: 1.4rem;"
                data-bind=" click: $data.convertToTask">
                <img src="svg/plus.svg" class="webpad-edit-pencil" style="margin-left: 0.5rem;" alt="Edit"/> 
                <img src="svg/quote-left-sky.svg" class="webpad-edit-pencil" alt="Add information" /> 
                <span class="" style="color: #84bfff; vertical-align: middle; margin-right: 0.5rem;" alt="hashTagBeginSymbol"> task</span>
            </div>
        </span>
    </span>
</script>

<script type="text/html" id="text-with-dictionary-light-template">
    <!-- ko foreach: $data.textSplitted -->  
        <!-- ko if: $data.word.startsWith('https://') -->
            <span class="webpad-break-words-node" data-bind="
                text: word,
                style:
                {
                    color: $parent.color,
                    'border-color': $parent.color_border,
                    'border-bottom-style': 'solid',
                    'word-break': word.length < 20 ? 'break-word' : 'break-all',
                },
                click: $root.open_url
                    ">
            </span>
        <!-- /ko -->
        <!-- ko ifnot: $data.word.startsWith('https://') -->         
            <span class="webpad-break-words-node webpad-border-bottom-dotted" data-bind="
                text: word,
                style:
                {
                    color: $parent.color,
                    'border-color': $parent.color_border,
                    'border-bottom-style': word.length < 3 ? 'solid' : 'dotted',
                    'word-break': word.length < 20 ? 'break-word' : 'break-all',
                },
                click: $root.jumpToCardFromWord
                    "></span>
        <!-- /ko -->            
    <!-- /ko -->
</script>

<script type="text/html" id="referenced-operation-template">
    <div
        class="webpad-sky-frame webpad-brightness-dimmed"
        style=" font-size: 1rem; margin-left: 1rem; margin-right: 1rem; padding-right: 0.5rem; padding-left: 0.5rem;" >
            <!-- ko template: { name: 'text-with-dictionary-light-template', data: $data }  -->
            <!-- /ko -->
    </div>
    <div class="webpad-hide-on-small-screen" style="height: 1rem;">
    </div>
</script>




<script type="text/html" id="operation-template">
        <div class="w3-col w3-container s12 m12 l12 webpad-operation-card prevent-select" style="position: absolute;" data-bind="style : { bottom: $data.globalBottom}, attr: { id: $index() + '-card'}">
            <div 
                style="font-size: 1.3rem;" 
                class="webpad-card w3-animate-opacity" 
                 >
                 <!-- data-bind="click: $data.switchToolBoxVisibility" -->
                <span>
                    
                    <span data-bind="if: name === 'quote' || name === 'quote-edit' " >
                        <div class="webpad-brightness-dimmed " data-bind="css:{ 'webpad-quote-edit' : name === 'quote-edit', 'webpad-quote' : name === 'quote'}">
                            <!-- ko template: { name: 'text-with-dictionary-light-template', data: $data.quoted }  -->
                            <!-- /ko -->
                            &nbsp;
                            <span data-bind="visible: $data.toolBoxVisible">
                                <span  class="w3-animate-opacity webpad-brightness-dimmed">
                                    <span class="webpad-button-no-border webpad-brightness-dimmed webpad-golden-frame prevent-select cursor-pointer" 
                                        style="font-size: 1.4rem; padding-left: 0.5rem; padding-right: 0.5rem; " data-bind=" click: $root.jumpToCardFromQuotedOperation">
                                        <img src="svg/search.svg" class="webpad-edit-pencil" alt="jump to quote source"/> 
                                    </span>
                                    <span
                                        class="webpad-brightness-dimmed webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" 
                                        style="font-size: 1.4rem;"
                                        data-bind=" click: $root.beginToQuoteQuotedText">
                                        <span class="" style="color: #84bfff; vertical-align: middle; margin-left: 0.5rem;" alt="hashTagBeginSymbol"></span>
                                        <img src="svg/quote-left-sky.svg" class="webpad-edit-pencil" alt="Add information" /> 
                                        <img src="svg/plus.svg" class="webpad-edit-pencil" style="margin-right: 0.5rem;" alt="Edit"/> 
                                    </span>
                                </span>
                            </span>
                        </div>
                    </span>
                    <span >
                        <!-- ko template: { name: 'text-with-dictionary-light-template', data: $data }  -->
                        <!-- /ko -->
                        <div style="font-size: 0.6rem;"><span class="w3-animate-opacity webpad-brightness-dimmed-3x" style="color: aliceblue;" data-bind="text: $data.createDateToOrder"></span></div>
                        <span data-bind="visible: $data.toolBoxVisible">
                            <span  class="w3-animate-opacity webpad-brightness-dimmed">
                                <span 
                                    class="webpad-brightness-dimmed webpad-button-no-border webpad-glass-button webpad-golden-frame prevent-select cursor-pointer" 
                                    style="font-size: 1.4rem;"
                                    data-bind=" click: $root.jumpToCardFromOperation">   
                                    <img src="svg/search.svg" class="webpad-edit-pencil" style="margin-left: 0.5rem; margin-right: 0.5rem;"  alt="jump to quote source"/> 
                                    <span class="" style="color: #84bfff; vertical-align: middle;" alt="hashTagBeginSymbol"></span>
                                </span>
                                <span class="webpad-brightness-dimmed webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" 
                                    style="font-size: 1.4rem;"
                                    data-bind=" click: $root.beginToQuoteEditText">
                                    <span class="" style="color: #84bfff; vertical-align: middle; margin-left: 0.5rem;" alt="hashTagBeginSymbol"></span>
                                    <img src="svg/pencil-alt-yellow.svg" class="webpad-edit-pencil" style="margin-left: 0.5rem; margin-right: 0.5rem;" alt="Edit"/> 
                                </span>
                                <span
                                    class="webpad-brightness-dimmed webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" 
                                    style="font-size: 1.4rem;"
                                    data-bind=" click: $root.beginToQuoteText">
                                    <span class="" style="color: #84bfff; vertical-align: middle; margin-left: 0.5rem;" alt="hashTagBeginSymbol"></span>
                                    <img src="svg/quote-left-sky.svg" class="webpad-edit-pencil" alt="Add information" /> 
                                    <img src="svg/plus.svg" class="webpad-edit-pencil" style="margin-right: 0.5rem;" alt="Edit"/> 
                                </span>
                                
                            </span>
                            <div style="font-size: 0.8rem;" class="w3-animate-opacity webpad-brightness-dimmed"  >
                                    <span style="color: aliceblue;  vertical-align: middle;" data-bind="text: $data.createDate">
                                    </span>
                                </div>
                        </span>
                    </span>
                </span>
            </div>
            
            
            
        </div>
</script>

<script type="text/html" id="show-more-template">
        <div class="w3-row" data-bind="if: $root.hidden_operations_count() > 0">
            <div class="w3-col w3-container s12 m12 l12">
                <span style="font-size: 2rem;">
                    <button  class="webpad-node webpad-green" 
                        data-bind=
                            "click: $root.ExtendCurrentResultLimit,
                            text: 'Show more items ( ' + $root.hidden_operations_count() + ' hidden)'">
                    </button>
                </span>
            </div>
        </div>
</script>


<body class='night' 
    style="background-color: #000000; margin: 0; " 
    data-bind="style: { background: $root.backgroundColor() }" 
    onresize="lookup.on_resize()"
    onload="lookup.body_on_load()"
    onwheel="lookup.bodyOnWheel()"
    ontouchmove="lookup.bodyOnTouchMove()"
    ontouchend="lookup.bodyOnTouchEnd()"
    ontouchcancel="lookup.bodyOnTouchEnd()"
    ontouchleave="lookup.bodyOnTouchEnd()"
    onmousedown="lookup.body_onmousedown()"
    onmouseup="lookup.body_onmouseup()"
    onmousemove="lookup.body_onmousemove()"
    onmouseleave="lookup.body_onmouseleave()"
    >
        <div vocab="https://schema.org/"
            typeof="WebApplication" style="display: none;">
            <span property="name" >WebPad</span>
            <span property="description">wiki, personal wiki.</span>
            <span property="accessMode">textual</span>
            <div property="offers" typeof="Offer">
                Price: $<span property="price">0.00</span>
                <meta property="priceCurrency" content="USD" />
                <span property="description">personal wiki that cares about privacy.</span>
            </div>
            <span property="operatingSystem">Windows</span>
            <span property="operatingSystem">Linux</span>
            <span property="operatingSystem">MacOs</span>
            <span property="operatingSystem">Android</span>
            <span property="image">https://webpad.com.ua/WebPad_logo_500.png</span>
        
        </div>
        
        <div vocab="https://schema.org/"
            typeof="Organization" style="display: none;">
            <span property="url" >https://webpad.com.ua</span>
            <span property="logo">https://webpad.com.ua/WebPad_logo_500.png</span>
        </div>
        
        
        
        <div id="webpad-header-absolute-position" class="webpad-header-absolute-position prevent-select" style="display: none;" data-bind="visible: !$root.menuIsOpen()">
            <div class="w3-row">
                <div class="w3-col w3-container s12 m12 l12">
                    <div class=" webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" data-bind="click: $root.toggleMenu">
                        <span id="menu-icon-id" style="font-size: 2rem;">
                            <img src="svg/bars.svg" class="webpad-edit-pencil " style="margin-left: 0.5rem; margin-right: 0.5rem;" alt="open menu"/> 
                        </span>
                        
                    </div>
                    <span class="webpad-color-yellow" style="font-size: 2rem;">
                        <span style="vertical-align: text-bottom;"><img src="svg/Flag_of_Ukraine.svg" class="webpad-svg-element " style="margin-left: 0.5rem; margin-right: 0.5rem;" alt="made by Ukrainian"/></span>Web
                    </span>
                    <span class="webpad-color-blue" style="font-size: 2rem;">
                        Pad
                    </span>

                    <span class="webpad-color-yellow webpad-hide-on-small-screen" style="font-size: 2rem;">
                        : personal wiki
                    </span>
                    <span class="webpad-color-yellow webpad-hide-on-large-screen" style="font-size: 1.3rem;">
                        : personal wiki
                    </span>
                    <span class="support-links webpad-hide-on-small-screen" 
                        data-bind="ifnot: $root.platform_is_cordova()" >
                        <span
                            class="lisperanto-patreon">
                            <a 
                                href="https://www.patreon.com/o_kryvonos" 
                                target="_blank" 
                                rel="noopener noreferrer"
                                onclick="lookup.patreonLinkOnClick(event)"
                                >
                                Support on Patreon
                            </a>
                        </span>
                        <span
                            class="mypage-discord">
                            <a href="https://discord.gg/W5HFSKVXgc">Join Discord</a>
                        </span>
                        <span
                            class="mypage-android">
                            <a href="https://play.google.com/store/apps/details?id=ua.com.webpad">Android app</a>
                        </span>
                        <span class="mypage-desktop-laptop" >
                            <a href="https://github.com/uprun/WebPad/releases">Desktop/Laptop releases</a>
                        </span>

                    </span>
                    <span class="support-links-small webpad-hide-on-large-screen" 
                        style="font-size: 0.8rem;"
                        data-bind="ifnot: $root.platform_is_cordova()" >
                        <span
                            class="lisperanto-patreon">
                            <a 
                                href="https://www.patreon.com/o_kryvonos" 
                                target="_blank" 
                                rel="noopener noreferrer"
                                onclick="lookup.patreonLinkOnClick(event)"
                                >P</a>
                        </span>
                        <span
                            class="mypage-discord">
                            <a href="https://discord.gg/W5HFSKVXgc">D</a>
                        </span>
                        <span
                            class="mypage-android">
                            <a href="https://play.google.com/store/apps/details?id=ua.com.webpad">A</a>
                        </span>
                        <span class="mypage-desktop-laptop" >
                            <a href="https://github.com/uprun/WebPad/releases">PC</a>
                        </span>

                    </span>
                </div>
            </div>
        </div>
        <div 
            class="webpad-menu-absolute-position webpad-menu-animate-left" 
            style="display: none;" 
            data-bind="
                visible:  $root.menuWasAlreadyOpen(),
                css: { 
                    'webpad-menu-animate-show-from-left': $root.menuIsOpen(),
                    'webpad-menu-animate-fade-back': !$root.menuIsOpen()
                }">
            <div class="w3-row webpad-sky-frame webpad-options-background">
                <div class="w3-col w3-container s12 m12 l12 prevent-select">
                    <span class="webpad-color-yellow" style="font-size: 2rem;">
                        <span style="vertical-align: text-bottom;"><img src="svg/Flag_of_Ukraine.svg" class="webpad-svg-element " style="margin-left: 0.5rem; margin-right: 0.5rem;" alt="made by Ukrainian"/></span>Web
                    </span>
                    <span class="webpad-color-blue" style="font-size: 2rem;">
                        Pad
                    </span>
                    <span class="webpad-color-yellow webpad-hide-on-small-screen" style="font-size: 2rem;">
                        : options
                    </span>
                    <span class="webpad-color-yellow webpad-hide-on-large-screen" style="font-size: 1.3rem;">
                        : options
                    </span>
                    <div style="float: right;" class=" webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" data-bind="click: $root.toggleMenu">
                        <span style="font-size: 2rem;">
                            <img src="svg/times-close-menu.svg" class="webpad-edit-pencil" alt="close menu"/> 
                        </span>
                        
                    </div>
                </div>
                <div class="w3-col w3-container s12 m12 l12 webpad-color-purple">
                    <h3>designed &#127912; and made &#127959;&#65039; by Ukrainian <span style="vertical-align: text-bottom;"><img src="svg/Flag_of_Ukraine.svg" class="webpad-svg-element " style="margin-left: 0.5rem; margin-right: 0.5rem;" alt="made by Ukrainian"/></span></h3>
                    
                </div>
                <div class="w3-col w3-container s12 m12 l12">
                    <h2>
                        <a style="color: rgb(242, 155, 103);" data-bind="attr:
                        {
                            href: privacy_policy_link
                        }">Privacy policy</a>
                    </h2>
                    <div style="height: 0.8rem;"></div>
                </div>
                <div 
                    class="w3-col w3-container s12 m12 l12" 
                    data-bind="ifnot: $root.platform_is_cordova()"
                     >
                    <span 
                        
                        class="lisperanto-patreon">
                        <a 
                            href="https://www.patreon.com/o_kryvonos" 
                            target="_blank" 
                            rel="noopener noreferrer"
                            onclick="lookup.patreonLinkOnClick(event)"
                            >
                            Support on Patreon
                        </a>
                    </span>
                    <span
                        class="mypage-discord">
                        <a href="https://discord.gg/W5HFSKVXgc">Join Discord</a>
                    </span>
                    <span
                        class="mypage-android">
                        <a href="https://play.google.com/store/apps/details?id=ua.com.webpad">Android app</a>
                    </span>
                </div>
                <div 
                    class="w3-col w3-container s12 m12 l12" 
                    data-bind="if: $root.platform_is_cordova()"
                     >
                    <span
                        class="mypage-discord">
                        <a href="https://discord.gg/W5HFSKVXgc">Join Discord</a>
                    </span>
                </div>
                <div class="w3-col w3-container s12 m12 l12">
                    <span class="webpad-color-blue" style="font-size: 1.4rem; " >
                            Background:
                    </span>
                </div>
                <div class="w3-col w3-container s12 m12 l12">
                    <div style="font-size: 1.4rem; background: #333" class="webpad-button-no-border webpad-button-paddings webpad-golden-frame webpad-color-coral prevent-select cursor-pointer" 
                            data-bind="click: $root.changeBackground">
                            graphite
                    </div>
                    <div style="font-size: 1.4rem; background: #000" class="webpad-button-no-border webpad-button-paddings webpad-golden-frame webpad-color-purple prevent-select cursor-pointer" 
                            data-bind="click: $root.changeBackgroundToDefault">
                            darkness
                    </div>
                </div>
                <div class="w3-col w3-container s12 m12 l12">
                    <span class="webpad-color-blue" style="font-size: 1.4rem; " >
                            Demo notes use is:
                    </span>
                </div>
                <div class="w3-col w3-container s12 m12 l12">
                    
                    <div style="font-size: 1.4rem; " class="webpad-button-no-border webpad-button-paddings webpad-green-frame webpad-color-orange prevent-select cursor-pointer" 
                            data-bind="
                                click: $root.set_option_show_help_demo_notes_to_false,
                                style:
                                {
                                    visibility: $root.option_show_help_demo_notes() ? 'inherit' : 'hidden'
                                }">
                            on
                    </div>
                    <div style="font-size: 1.4rem; " class="webpad-button-no-border webpad-button-paddings webpad-orange-frame webpad-color-orange prevent-select cursor-pointer" 
                            data-bind="
                                click: $root.set_option_show_help_demo_notes_to_true,
                                style:
                                {
                                    visibility: $root.option_show_help_demo_notes() ? 'hidden' : 'inherit'
                                }">
                            off
                    </div>

                </div>

                <div class="w3-col w3-container s12 m12 l12">
                    <span class="webpad-color-blue" style="font-size: 1.4rem; " >
                            Japanise tokeniser is:
                    </span>
                </div>
                <div class="w3-col w3-container s12 m12 l12">
                    
                    <div style="font-size: 1.4rem; " class="webpad-button-no-border webpad-button-paddings webpad-green-frame webpad-color-orange prevent-select cursor-pointer" 
                            data-bind="
                                click: $root.set_option_use_Japanese_tokeniser_to_false,
                                style:
                                {
                                    visibility: $root.option_use_Japanese_tokeniser() ? 'inherit' : 'hidden'
                                }">
                            on
                    </div>
                    <div style="font-size: 1.4rem; " class="webpad-button-no-border webpad-button-paddings webpad-orange-frame webpad-color-orange prevent-select cursor-pointer" 
                            data-bind="
                                click: $root.set_option_use_Japanese_tokeniser_to_true,
                                style:
                                {
                                    visibility: $root.option_use_Japanese_tokeniser() ? 'hidden' : 'inherit'
                                }">
                            off
                    </div>

                </div>

                <div class="w3-col w3-container s12 m12 l12">
                    <span class="webpad-color-blue" style="font-size: 1.4rem; " >
                            Export & import:
                    </span>
                </div>
                <div class="w3-col w3-container s12 m12 l12">
                    <div style="color: yellow;">All data is stored only on your device, use export regularly to perform a backup:</div>
                    <div style="font-size: 1.4rem; " class="webpad-button-no-border webpad-button-paddings webpad-golden-frame webpad-color-orange prevent-select cursor-pointer" 
                            data-bind="click: $root.export">
                            export
                    </div>
                </div>
                <div class="w3-col w3-container s12 m12 l12">
                    <label for="importSnapshotFile" style="color: yellow;">Select a snapshot file to import:</label>
                    <br/>
                    <input type="file" id="importSnapshotFile" style="width: 20rem; color: yellow;" >
                    <div style="font-size: 1.4rem;" class="webpad-button-no-border webpad-button-paddings webpad-golden-frame webpad-color-purple prevent-select cursor-pointer" 
                            data-bind="click: $root.import">
                            import
                    </div>
                </div>
                
                <div class="w3-col w3-container s12 m12 l12" style="margin-top: 0.5rem;" >
                    <span class="webpad-color-blue" style="font-size: 1.4rem;" >Development is supported by:</span>
                </div>

                <div class="w3-col w3-container s12 m12 l12" style="margin-left: 1rem; margin-top: 0.5rem; margin-bottom: 0.5rem; font-size: 1.2rem;" >
                    <!-- ko foreach: $root.patreonSupporters -->
                    <div class="webpad-color-coral"
                        data-bind="text: $data">
                    </div>
                    <!-- /ko -->
                </div>

                <div class="w3-col w3-container s12 m12 l12" style="margin-top: 0.5rem;" >
                    <span class="webpad-color-blue" style="font-size: 1.4rem;" >Code contributors:</span>
                </div>

                <div class="w3-col w3-container s12 m12 l12" style="margin-left: 1rem; margin-top: 0.5rem; margin-bottom: 0.5rem; font-size: 1.2rem;" >
                    <!-- ko foreach: $root.codeContributors -->
                    <div class="webpad-color-coral"
                        data-bind="text: $data">
                    </div>
                    <!-- /ko -->
                </div>

                <div class="w3-col w3-container s12 m12 l12" style="margin-top: 0.5rem;" >
                    <span class="webpad-color-blue" style="font-size: 1.4rem;" >Used tools:</span>
                </div>

                <div class="w3-col w3-container s12 m12 l12" style="margin-left: 1rem; margin-top: 0.5rem; margin-bottom: 0.5rem; font-size: 1.2rem;" >
                    <!-- ko foreach: $root.librariesInUse -->
                    <div class="webpad-color-coral">
                        <a target="_blank" data-bind="text: $data.library, attr: {href: $data.url}"></a>
                    </div>
                    <!-- /ko -->
                </div>

                
                
                <address class="webpad-color-yellow" style="padding-left: 1rem; margin-bottom: 1rem;">
                    This app is created by <span class="webpad-color-coral" style="font-size: 1.4rem;">Oleksandr Kryvonos</span>, a developer from Odesa, Ukraine  <span style="font-size: 2rem;"><span style="vertical-align: text-bottom;"><img src="svg/Flag_of_Ukraine.svg" class="webpad-svg-element " style="margin-left: 0.5rem; margin-right: 0.5rem;" alt="made by Ukrainian"/></span></span>  . <br/>
                    It is an open-source project: <a href="https://github.com/uprun/WebPad">https://github.com/uprun/WebPad</a> <br/>
                    
                    if you have any suggestions feel free to e-mail me: <a href="mailto:oleksandr.kryvonos.ods.ua@gmail.com">oleksandr.kryvonos.ods.ua@gmail.com</a><br/>
                </address> 
                <div class="w3-col w3-container s12 m12 l12 webpad-color-coral" data-bind="if: $root.platform_is_cordova()">
                    For more information you can visit a website of the project <a href="https://webpad.com.ua">https://webpad.com.ua</a> <br/>
                </div>
                <div class="w3-col w3-container s12 m12 l12" style="margin-top: 0.5rem;" >
                    <span class="webpad-color-blue" style="font-size: 1.4rem;" >Version 1.10.* [2023-12-15]</span>
                </div>
                
                
            </div>
        </div>

        <div id="webpad-search-results-absolute-position"  class="w3-col w3-container s12 m8 l6 webpad-text-column"  style="height: calc(100% - 8rem); position: absolute; margin: auto; overflow-x: hidden; overflow-y: hidden;">
            <div style="position: absolute;" data-bind="template: { name: 'show-more-template' } " ></div>
            <!-- ko template: 
                    { 
                        name: 'operation-template',
                        foreach: LimitedFilteredOperations,
                        afterRender: $root.cardAfterRender
                    } -->
            <!-- /ko -->
        </div>

        <div 
            class="webpad-search-absolute-position" 
            style="display: none; bottom: 0rem; margin-bottom: 0.2em;" 
            data-bind="visible:  typeof($root.toBeEdited()) === 'undefined'">
            <div class="w3-row">
                <div class="w3-col w3-container s0 m2 l3 webpad-hide-on-small-screen" style="font-size: 2rem; margin: 0px; padding: 0px;">
                    &NonBreakingSpace;
                    <span style="float: right;" data-bind="if: $root.stackSearchNotesQuery().length > 0">
                        <div class="webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" data-bind=" click: $root.rollbackSearchNotesQuery">
                            <span lass="webpad-brightness-dimmed" style="color: aliceblue; vertical-align: middle;" data-bind="text: $root.stackSearchNotesQuery().length">
                            </span>
                            <img src="svg/history.svg" class="webpad-edit-pencil" alt="create"/> 
                        </div>
                    </span>
                    <span style="float: right;" data-bind="if: $root.stackSearchNotesQuery().length === 0 && $root.SearchNotesQuery().trim().length > 0">
                        <div class="webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" data-bind=" click: $root.rollbackSearchNotesQuery">
                            <img src="svg/history.svg" class="webpad-edit-pencil" style=" margin-left: 0.5rem; margin-right: 0.5rem;" alt="create"/> 
                        </div>
                    </span>
                </div>
                <div class="w3-col w3-container s12 m8 l6 webpad-hide-on-small-screen" style="font-size: 1.4rem;">
                    <input 
                        placeholder="create or search note ..." 
                        class="webpad-search-bar webpad-search-bar-adjusted"
                        type="text" 
                        data-bind="
                            textInput: $root.SearchNotesQuery,
                            event: {keypress: $root.searchBarKeyPress}
                            " 
                    /> 
                </div>
                <div class="w3-col w3-container s0 m2 l3 webpad-hide-on-small-screen" style="font-size: 2rem; margin: 0px; padding: 0px;">
                    <span style="float: left;" data-bind="if: $root.SearchNotesQuery().trim().length > 0">
                        <div class="webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" data-bind=" click: $root.CreateNoteFromSearchQuery">
                            <img src="svg/plus.svg" class="webpad-edit-pencil " style=" margin-left: 0.5rem; margin-right: 0.5rem;" alt="create"/> 
                        </div>
                    </span>
                    &NonBreakingSpace;

                </div>
                <div class="w3-col w3-container s12 m8 l6 webpad-hide-on-large-screen" style="font-size: 1.4rem; margin: 0px; padding: 0px;">
                    <div class="w3-row">
                        <div class="w3-col w3-container s6 webpad-hide-on-large-screen" style="font-size: 2rem;">
                            <span data-bind="if: $root.stackSearchNotesQuery().length > 0">
                                <div class="webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" data-bind=" click: $root.rollbackSearchNotesQuery">
                                    <span lass="webpad-brightness-dimmed" style="color: aliceblue; vertical-align: middle;" data-bind="text: $root.stackSearchNotesQuery().length">
                                    </span>
                                    <img src="svg/history.svg" class="webpad-edit-pencil" alt="create"/> 
                                </div>
                            </span>
                            <span data-bind="if: $root.stackSearchNotesQuery().length === 0 && $root.SearchNotesQuery().trim().length > 0">
                                <div class="webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" data-bind=" click: $root.rollbackSearchNotesQuery">
                                    <img src="svg/history.svg" class="webpad-edit-pencil" style=" margin-left: 0.5rem; margin-right: 0.5rem;" alt="create"/> 
                                </div>
                            </span>
                        </div>
                        <div class="w3-col w3-container s6  webpad-hide-on-large-screen" style="font-size: 2rem;">
                            <span data-bind="if: $root.SearchNotesQuery().trim().length > 0">
                                <div class="webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" style="float: right;" data-bind=" click: $root.CreateNoteFromSearchQuery">
                                    <img src="svg/plus.svg" class="webpad-edit-pencil" style=" margin-left: 0.5rem; margin-right: 0.5rem;" alt="create"/> 
                                </div>
                            </span>
                        </div>
                        <div class="w3-col w3-container s12 webpad-hide-on-large-screen" style="font-size: 1.4rem;">
                            <input 
                                placeholder="create or search note ..." 
                                class="webpad-search-bar webpad-search-bar-full-width"
                                type="text" 
                                data-bind="
                                    textInput: $root.SearchNotesQuery,
                                    event: {keypress: $root.searchBarKeyPress}
                                    " 
                            />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div 
            class="webpad-search-absolute-position" 
            style="display: none; bottom: 0rem; margin-bottom: 0.2em;"
             data-bind="if: typeof($root.operationToBeQuoted()) !== 'undefined', visible: typeof($root.operationToBeQuoted()) !== 'undefined'">
            <div class="w3-row">
                <div class="w3-col w3-container s0 m2 l3 webpad-hide-on-small-screen" style="font-size: 2rem; margin: 0px; padding: 0px;">
                    &NonBreakingSpace;
                </div>
                <div class="w3-col w3-container s12 m8 l6" >
                    <!-- ko template: { name: 'referenced-operation-template', data: $root.operationToBeQuoted() }  -->
                    <!-- /ko -->
                </div>
                <div class="w3-col w3-container s0 m2 l3 webpad-hide-on-small-screen" style="font-size: 2rem; margin: 0px; padding: 0px;">
                    &NonBreakingSpace;
                </div>
                
            </div>
            <div class="w3-row">
                <div class="w3-col w3-container s0 m2 l3 webpad-hide-on-small-screen" style="font-size: 2rem; margin: 0px; padding: 0px;">
                    &NonBreakingSpace;
                    <span style="float: right;">
                        <div class="webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" data-bind=" click: $root.cancelAddingQuote">
                            <img src="svg/times-green.svg" class="webpad-edit-pencil" alt="cancel edit"/> 
                        </div>
                    </span>
                </div>
                <div class="w3-col w3-container s12 m8 l6 webpad-hide-on-small-screen" style="font-size: 1.4rem;">
                    
                    <span class="webpad-brightness-dimmed webpad-button-no-border" >
                        <!-- ko ifnot: $root.isQuoteEdit -->
                        <img src="svg/quote-left-sky.svg" class="webpad-edit-pencil prevent-select" alt="Add information" /> 
                        <!-- /ko -->
                        <!-- ko if: $root.isQuoteEdit -->
                        <img src="svg/pencil-alt-yellow.svg" class="webpad-edit-pencil prevent-select" alt="Edit"/> 
                        <!-- /ko -->
                    </span>
                    
                    <span style="width: calc(100% - 2em);" class="webpad-break-words-node"
                        data-bind="
                                style:
                                {
                                    color: $root.colorOfNextQuote,
                                },">
                        <input 
                            placeholder="add quote" 
                            class="webpad-extra-information w3-animate-opacity"
                            type="text" 
                            data-bind="
                                textInput:  $root.actualTextOfQuote,
                                event: {keypress: $root.additionalInfoKeyPress}, 
                                hasFocus: true
                                " 
                        />
                    </span>                    
                </div>
                <div class="w3-col w3-container s0 m2 l3 webpad-hide-on-small-screen" style="font-size: 2rem; margin: 0px; padding: 0px;">
                    <span style="float: left;" data-bind="if: $root.actualTextOfQuote().trim().length > 0 && $root.actualTextOfQuote().trim() !== $root.operationToBeQuoted().text.trim() ">
                        <div class="webpad-brightness-dimmed webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" data-bind=" click: $root.AddNoteToExistingOne">
                            <img src="svg/check.svg"  class="webpad-edit-pencil" alt="Apply edit" /> 
                            <span style="color: aliceblue; font-size: 1.4rem;">
                            </span>
                        </div>
                    </span>
                    &NonBreakingSpace;

                </div>
                <div class="w3-col w3-container s12 m8 l6 webpad-hide-on-large-screen" style="font-size: 1.4rem; margin: 0px; padding: 0px;">
                    <div class="w3-row">
                        <div class="w3-col w3-container s6 webpad-hide-on-large-screen" style="font-size: 2rem;">
                            <span >
                                <div class="webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" data-bind=" click: $root.cancelAddingQuote">
                                    <img src="svg/times-green.svg" class="webpad-edit-pencil" alt="cancel edit"/> 
                                </div>
                            </span>
                           
                        </div>
                        <div class="w3-col w3-container s6  webpad-hide-on-large-screen" style="font-size: 2rem;">
                            <span data-bind="if: $root.actualTextOfQuote().trim().length > 0 && $root.actualTextOfQuote().trim() !== $root.operationToBeQuoted().text.trim() ">
                                <div class="webpad-brightness-dimmed webpad-button-no-border webpad-golden-frame prevent-select cursor-pointer" style="float: right;" data-bind=" click: $root.AddNoteToExistingOne">
                                    <img src="svg/check.svg" class="webpad-edit-pencil" alt="Apply edit" /> 
                                    <span style="color: aliceblue; font-size: 1.4rem; margin-right: 0.5rem;">
                                    </span>
                                </div>
                            </span>
                        </div>
                        <div class="w3-col w3-container s12 webpad-hide-on-large-screen" style="font-size: 1.4rem;">
                            
                            <span class="webpad-brightness-dimmed webpad-button-no-border" >
                                <!-- ko ifnot: $root.isQuoteEdit -->
                                <img src="svg/quote-left-sky.svg" class="webpad-edit-pencil prevent-select" alt="Add information" /> 
                                <!-- /ko -->
                                <!-- ko if: $root.isQuoteEdit -->
                                <img src="svg/pencil-alt-yellow.svg" class="webpad-edit-pencil prevent-select" alt="Edit"/> 
                                <!-- /ko -->
                            </span>
                            
                            <span style="width: calc(100% - 2em);" class="webpad-break-words-node"
                                data-bind="
                                        style:
                                        {
                                            color: $root.colorOfNextQuote,
                                        },">
                                <input 
                                    placeholder="add quote" 
                                    class="webpad-extra-information w3-animate-opacity"
                                    type="text" 
                                    data-bind="
                                        textInput:  $root.actualTextOfQuote,
                                        event: {keypress: $root.additionalInfoKeyPress}, 
                                        hasFocus: true
                                        " 
                                />
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
</body>
</html>
